function Basic_CaliPresenter(){this.m_initA1=0,this.m_initA2=0,this.m_locked=!1,this.m_a1=0,this.m_a2=0,this.m_a1Set=!1,this.m_a2Set=!1,this.m_a2Enabled=!1,this.m_oldValues=new Array,this.m_lastValueTag=-1,this.m_ovTopTag=-1,this.m2_newValRecd=!0,this.setInitA1=function(t){this.validateInput(t)&&(this.m_initA1=t,this.m_a1Set||(this.m_a1=this.m_initA1,this.m_a1Set=!0),this.m_lastValueTag<0&&(this.m_lastValueTag=0,this.m_oldValues[0]=t,this.m_ovTopTag=0))},this.setInitA2=function(t){this.validateInput(t)&&(this.m_initA2=t,this.m_a2Set||(this.m_a2=this.m_initA2,this.m_a2Set=!0))},this.lock=function(){this.m_locked=!0},this.unlock=function(){this.m_locked=!1},this.getA1=function(){return this.m_a1},this.inputA1=function(t){this.validateInput(t)&&(this.m_locked||(this.m_a1Set?this.m2_newValRecd=!1:(this.m_lastValueTag=0,this.m_oldValues[this.m_lastValueTag]=t,this.m_ovTopTag=0),this.m_a1=t,this.m_a1Set=!0))},this.undoA1=function(){this.m_lastValueTag>0&&this.m2_newValRecd&&--this.m_lastValueTag,this.m_a1=this.m_oldValues[this.m_lastValueTag],this.m2_newValRecd=!0},this.redoA1=function(){this.m2_newValRecd&&(this.m_lastValueTag<this.m_ovTopTag&&++this.m_lastValueTag,this.m_a1=this.m_oldValues[this.m_lastValueTag])},this.recA1=function(){++this.m_lastValueTag,this.m_oldValues[this.m_lastValueTag]=this.m_a1,this.m_ovTopTag=this.m_lastValueTag,this.m2_newValRecd=!0},this.enableA2=function(){this.m_a2Enabled=!0},this.disableA2=function(){this.m_a2Enabled=!1},this.a2Enabled=function(){return this.m_a2Enabled},this.getA2=function(){return this.m_a2Enabled?this.m_a2:this.m_a1},this.inputA2=function(t){this.validateInput(t)&&(this.m_locked||this.m_a2Enabled&&(this.m_a2=t,this.m_a2Set=!0))},this.resetValues=function(){this.m_a1=this.m_initA1,this.m_a2=this.m_initA2,this.m_locked=!1,this.m_a2Enabled=!1,this.m_a1Set=!1,this.m_a2Set=!1},this.validateInput=function(t){return"number"==typeof t?isNaN(t)?!1:0>=t?!1:!0:!1}}function ImgThumbModel(){this.m_thMaxWidth=0,this.m_thMaxHeight=0,this.m_imgWidth=0,this.m_imgHeight=0,this.m_imgSelRect=0,this.getRat=function(){var t,e;return t=this.m_imgWidth/this.m_thMaxWidth,e=this.m_imgHeight/this.m_thMaxHeight,t>e?t:e},this.setThMaxWidth=function(t){this.m_thMaxWidth=t},this.setThMaxHeight=function(t){this.m_thMaxHeight=t},this.getThWidth=function(){return this.m_imgWidth/this.getRat()},this.getThHeight=function(){return this.m_imgHeight/this.getRat()},this.getThSelRect=function(){var t=new gdeint.CRect;return t.m_left=this.m_imgSelRect.m_left/this.getRat(),t.m_top=this.m_imgSelRect.m_top/this.getRat(),t.m_width=this.m_imgSelRect.m_width/this.getRat(),t.m_height=this.m_imgSelRect.m_height/this.getRat(),t},this.setImgWidth=function(t){this.m_imgWidth=t},this.setImgHeight=function(t){this.m_imgHeight=t},this.getImgSelRect=function(){return this.m_imgSelRect},this.setImgSelRect=function(t){this.m_imgSelRect=t},this.ip2Tp=function(t){var e=new gdeint.CPoint;return e.m_x=t.m_x/this.getRat(),e.m_y=t.m_y/this.getRat(),e},this.tp2Ip=function(t){var e=new gdeint.CPoint;return e.m_x=t.m_x/this.getThWidth()*this.m_imgWidth,e.m_y=t.m_y/this.getThHeight()*this.m_imgHeight,e}}function isInteger(t){return t%1===0}function ScoreFlagRect(){this.m_value1=0,this.m_value2=0,this.setCnts=function(t,e){this.m_value1=t,this.m_value2=e},this.getFlagArr=function(){var t,e,i=new Array;for(t=0;3>t;++t)for(i[t]=new Array,e=0;10>e;++e)i[t][e]=0;if("number"!=typeof this.m_value1||"number"!=typeof this.m_value2)return i;if(!isInteger(this.m_value1)||!isInteger(this.m_value2))return i;if(this.m_value1<0||this.m_value2<0)return i;if(this.m_value1+this.m_value2>30)return i;var n=0,r=this.m_value1-1;if(r>=n)if(Math.floor(n/10)==Math.floor(r/10))for(e=n;r>=e;++e)i[Math.floor(n/10)][e%10]=1;else{for(e=n%10;10>e;++e)i[Math.floor(n/10)][e%10]=1;for(t=Math.floor(n/10)+1;t<Math.floor(r/10);++t)for(e=0;10>e;++e)i[t][e]=1;for(e=0;e<=Math.floor(r%10);++e)i[Math.floor(r/10)][e]=1}if(n=this.m_value1,r=29-this.m_value2,r>=n)if(Math.floor(n/10)==Math.floor(r/10))for(e=n;r>=e;++e)i[Math.floor(n/10)][e%10]=0;else{for(e=n%10;10>e;++e)i[Math.floor(n/10)][e%10]=0;for(t=Math.floor(n/10)+1;t<Math.floor(r/10);++t)for(e=0;10>e;++e)i[t][e]=0;for(e=0;e<=Math.floor(r%10);++e)i[Math.floor(r/10)][e]=0}if(n=30-this.m_value2,r=29,r>=n)if(Math.floor(n/10)==Math.floor(r/10))for(e=n;r>=e;++e)i[Math.floor(n/10)][e%10]=2;else{for(e=n%10;10>e;++e)i[Math.floor(n/10)][e%10]=2;for(t=Math.floor(n/10)+1;t<Math.floor(r/10);++t)for(e=0;10>e;++e)i[t][e]=2;for(e=0;e<=Math.floor(r%10);++e)i[Math.floor(r/10)][e]=2}return i}}function playBtnSnd_default(){g2_sndObjs[g2_curSndTag]=RES.getRes("buttonSnd_mp3"),g2_sndChls[g2_curSndTag]=g2_sndObjs[g2_curSndTag].play(0,1),g2_curSndTag=(g2_curSndTag+1)%2}function playBtnSnd_iOS(){null!=g2_sndChls[0]&&g2_sndChls[0].stop(),g2_sndObjs[g2_curSndTag]=RES.getRes("buttonSnd_mp3"),g2_sndChls[0]=g2_sndObjs[g2_curSndTag].play(0,1)}function playBtnSnd(){S_BUILD_FOR==S_NATIVE_IOS?playBtnSnd_iOS():playBtnSnd_default()}function tag2PicResName(t){function e(t){return t%1===0}var i="";return!e(t)||0>=t||t>=1e3?i="":10>t?"pic00"+t+"_json":100>t?"pic0"+t+"_json":"pic"+t+"_json"}function getTagFromResName(t){var e=-1,i=t.trim(),n="";return"pic"==i.substr(0,3)&&"_"==i.charAt(6)?(n=i.substr(3,3),e=parseInt(n),(0>e||e>=1e3)&&(e=-1)):"img_"==t.trim().substr(0,4)&&"_"==i.charAt(7)?(n=i.substr(4,3),e=parseInt(n),(0>e||e>=1e3)&&(e=-1)):e=-1,e}function getAngleBetweenPoints0(t,e){var i;return e.m_x==t.m_x?i=e.m_y==t.m_y?0:e.m_y>t.m_y?270:90:(i=180*Math.atan((t.m_y-e.m_y)/(e.m_x-t.m_x))/Math.PI,e.m_x<t.m_x&&(i+=180),t.m_x==e.m_x&&e.m_y>t.m_y&&(i+=360),e.m_x>t.m_x&&t.m_y<e.m_y&&0>i&&(i+=360)),i}function calVXLen(t,e){var i;return i=Math.abs(t*Math.cos(e/180*Math.PI))}function calEdge1Point(t,e,i){var n;return n=new gdeint.CPoint,n.m_x=parseFloat(t.m_x)+parseFloat(i)*Math.cos(parseFloat(e)/180*Math.PI),n.m_y=parseFloat(t.m_y)+parseFloat(i)*Math.sin(parseFloat(e)/180*Math.PI),n}function calEdge2Point(t,e,i,n){var r;r=new gdeint.CPoint;var s,o,h,a;for(a=calVXLen(i,n),s=e+n;s>360;)s-=360;return o=a*Math.cos(s/180*Math.PI),h=a*Math.sin(s/180*Math.PI),r.m_x=o+t.m_x,r.m_y=h+t.m_y,r}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,s){function o(t){try{a(n.next(t))}catch(e){s(e)}}function h(t){try{a(n["throw"](t))}catch(e){s(e)}}function a(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(o,h)}a((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,s&&(o=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(s,i[1])).done)return o;switch(s=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,s=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(n){i=[6,n],s=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,s,o,h,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return h={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},CPage=function(){function t(){}return t.prototype.showOnFront=function(){this.onShownOnFront()},t.prototype.show=function(){},t.prototype.hide=function(){},t.prototype.onShownOnFront=function(){},t.prototype.isVisible=function(){return!0},t}();__reflect(CPage.prototype,"CPage",["IPage","IHidable"]);var CUIContainer=function(){function t(){}return t.prototype.setAlertDlg=function(t){this.m_alertDlg=t,this.m_alertDlg._setParentContainer(this),this.m_alertDlg.setParent(this)},t.prototype.setConfirmDlg=function(t){this.m_confirmDlg=t,this.m_confirmDlg._setParentContainer(this),this.m_confirmDlg.setParent(this)},t.prototype.setPreloaderUI=function(t){this.m_preloaderUI=t,this.m_preloaderUI._setParentContainer(this)},t.prototype._getAlertDlg=function(){return this.m_alertDlg},t.prototype._getConfirmDlg=function(){return this.m_confirmDlg},t.prototype._getPreloaderUI=function(){return this.m_preloaderUI},t.prototype.getAllPlugins=function(){var t=new Array;return t[0]=this.m_alertDlg,t[1]=this.m_confirmDlg,t[2]=this.m_preloaderUI,t},t.prototype.saveVisibleStates=function(){this.m_visibilityTempArr=new Array;var t,e=this.getAllPlugins();for(t=0;t<e.length;++t)this.m_visibilityTempArr[t]=e[t].isVisible()},t.prototype.getVisibleStates=function(){return this.m_visibilityTempArr},t.prototype.getDlgLayer=function(){return null},t.prototype.getNotiLayer=function(){return null},t.prototype.disableForNoti=function(){},t.prototype.resumeAfterNoti=function(){},t.prototype.showAlert=function(t,e){var i=(this.getVisibleStates(),this._getAlertDlg());i.setCloseListener(e),i.setContent(t),i.showDlg()},t.prototype.showConfirm=function(t,e){var i=this._getConfirmDlg();i.setCloseListener(e),i._setContent(t),this._getConfirmDlg().showDlg()},t.prototype.setCaRat=function(t){},t.prototype.getCaRat=function(){return 1},t.prototype.isVisible=function(){return!0},t.prototype.show=function(){var t,e=this.getAllPlugins();for(t=0;t<e.length;++t)this.m_visibilityTempArr&&this.m_visibilityTempArr[t]?e[t].show():e[t].hide()},t.prototype.hide=function(){this.saveVisibleStates();var t,e=this.getAllPlugins();for(t=0;t<e.length;++t)e[t].hide()},t.prototype.applyFunc=function(t,e){},t}();__reflect(CUIContainer.prototype,"CUIContainer",["IUIContainer","INotiParent","IHidable"]);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function r(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}var o=this;"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),r(t),egret.callLater(function(){e.call(n,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var g2_pcnt=0,g2_mcnt=0,eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_caliImgTag=1,e.m_caRate=1,e.m_autoUpdateFromCaliField=!0,e.m_caliPresenter=new CCaliPresenterAdapter,e.m_caliPresenter.setInitA1(e.m_caRate),e}return __extends(e,t),e.prototype._setParentContainer=function(t){this.m_parentContainer=t,this._getParentContainer().getDlgLayer().addChild(this)},e.prototype._getParentContainer=function(){return this.m_parentContainer},e.prototype._setCloseListener=function(t){this.m_closeListener=t},e.prototype._closeDlg=function(){this.visible=!1,this.m_closeListener&&this.m_closeListener(!1)},e.prototype.setSceneRect=function(t,e,i,n){this.x=t+(i-400)/2,this.y=e+(n-580)/5*2},e.prototype.childrenCreated=function(){this.OKBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOK,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.plusBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPlusTchBegin,this),this.plusBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onPlusTchEnd,this),this.plusBtn.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onPlusTchEnd,this),this.minusBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMinusTchBegin,this),this.minusBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onMinusTchEnd,this),this.minusBtn.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onMinusTchEnd,this),this.undoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUndo,this),this.redoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRedo,this),this.caliRateField.addEventListener(egret.Event.CHANGE,this.onCaliRateFieldChange,this),this.caliSquareCover.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCaliSquareCoverTap,this),this.chCaliImgBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCaliImgBtnTap,this),this.lockCB.addEventListener(egret.Event.CHANGE,this.onlockCBChanged,this),this.refreshCaRateField(),this.m_plusTimer=new egret.Timer(200,0),this.m_minusTimer=new egret.Timer(200,0)},e.prototype.getCaliRat=function(){return this.m_caRate},e.prototype.getSquareWidth=function(){return this.m_squareWidth},e.prototype.setSquareWidth=function(t){this.m_squareWidth=t,this.caliSquare.width=t,this.caliImg.width=t},e.prototype.refreshCaRateField=function(){this.m_autoUpdateFromCaliField=!1,this.caliRateField.text=this.m_caRate.toString(),this.m_autoUpdateFromCaliField=!0,this.setSquareWidth(this.caliSquare.height*this.m_caRate)},e.prototype.onCaliSquareCoverTap=function(t){this.m_locked||(this.setSquareWidth(t.stageX-(this.caliSquareCover.x+this.x)),this.m_caRate=this.caliSquare.width/this.caliSquare.height,this.caliRateField.text=this.m_caRate.toString(),this.m_caliPresenter.inputA1(this.m_caRate),this.m_caliPresenter.recA1())},e.prototype.onCaliRateFieldChange=function(t){if(this.m_autoUpdateFromCaliField&&EintValidators.CaRatValidator.validate(t.target.text)){var e=EintParsers.CaRatParser.parseFloat(t.target.text);e>1.8&&(e=1.8),this.m_caliPresenter.inputA1(e),Math.abs(this.m_caRate-this.m_caliPresenter.getA1())>1e-6&&this.m_caliPresenter.recA1(),this.m_caRate=e,this.setSquareWidth(this.caliSquare.height*e)}},e.prototype.onlockCBChanged=function(t){t.target.selected?(this.m_locked=!0,this.caliRateField.enabled=!1):(this.m_locked=!1,this.caliRateField.enabled=!0)},e.prototype.onCaliImgBtnTap=function(t){this.m_caliImgTag=this.m_caliImgTag%3+1,this.caliImg.source="square"+this.m_caliImgTag+"_png",playBtnSnd()},e.prototype.onOK=function(){this.visible=!1,this._getParentContainer().setCaRat(this.getCaliRat());var t=new Array;t[0]=!0,this._getParentContainer().applyFunc(this.m_closeListener,t)},e.prototype.onClose=function(){this.visible=!1;var t=new Array;t[0]=!1,this._getParentContainer().applyFunc(this.m_closeListener,t)},e.prototype.onPlusTimer=function(){this.m_caRate>=1.8||(this.m_caRate+=.01,g2_pcnt++,g2_pcnt>10&&(this.m_caRate+=.09),this.refreshCaRateField(),3==g2_pcnt%5&&(this.m_caliPresenter.inputA1(this.m_caRate),this.m_caliPresenter.recA1()))},e.prototype.onPlusTchEnd=function(){g2_pcnt=0,this.m_plusTimer.stop(),this.m_caliPresenter.inputA1(this.m_caRate),this.m_caliPresenter.recA1()},e.prototype.onPlusTchBegin=function(){this.m_locked||this.m_caRate>=1.8||(this.m_caRate+=.01,g2_pcnt++,this.refreshCaRateField(),this.m_plusTimer.stop(),this.m_plusTimer.addEventListener(egret.TimerEvent.TIMER,this.onPlusTimer,this),this.m_plusTimer.start())},e.prototype.onMinusTimer=function(){this.m_caRate-=.01,g2_mcnt++,g2_mcnt>10&&(this.m_caRate-=.09),this.m_caRate<0&&(this.m_caRate=1e-5),this.refreshCaRateField(),3==g2_pcnt%5&&(this.m_caliPresenter.inputA1(this.m_caRate),this.m_caliPresenter.recA1())},e.prototype.onMinusTchBegin=function(){this.m_locked||(this.m_caRate-=.01,g2_mcnt++,this.m_caRate<0&&(this.m_caRate=1e-5),this.refreshCaRateField(),this.m_minusTimer.stop(),this.m_minusTimer.addEventListener(egret.TimerEvent.TIMER,this.onMinusTimer,this),this.m_minusTimer.start())},e.prototype.onMinusTchEnd=function(){g2_mcnt=0,this.m_minusTimer.stop(),this.m_caliPresenter.inputA1(this.m_caRate),this.m_caliPresenter.recA1()},e.prototype.onUndo=function(){this.m_caliPresenter.undoA1();var t=this.m_caliPresenter.getA1();this.m_caRate=t,this.m_autoUpdateFromCaliField=!1,this.caliRateField.text=t.toString(),this.m_autoUpdateFromCaliField=!0,this.setSquareWidth(this.caliSquare.height*t)},e.prototype.onRedo=function(){this.m_caliPresenter.redoA1();var t=this.m_caliPresenter.getA1();this.m_caRate=t,this.m_autoUpdateFromCaliField=!1,this.caliRateField.text=t.toString(),this.m_autoUpdateFromCaliField=!0,this.setSquareWidth(this.caliSquare.height*t)},e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(){this.visible=!1},e.prototype.isVisible=function(){return this.visible},e}(eui.Component);t.CCaliDlg=e,__reflect(e.prototype,"eyeangle2.CCaliDlg",["ICaliDlgPlugin","ICaliDlg","IHidable","IContainerPlugin"])}(eyeangle2||(eyeangle2={}));var CCaliPresenterAdapter=function(){function t(){this.m_icp=new Basic_CaliPresenter}return t.prototype.setInitA1=function(t){this.m_icp.setInitA1(t)},t.prototype.lock=function(){this.m_icp.lock()},t.prototype.unlock=function(){this.m_icp.unlock()},t.prototype.getA1=function(){return this.m_icp.getA1()},t.prototype.inputA1=function(t){this.m_icp.inputA1(t)},t.prototype.undoA1=function(){this.m_icp.undoA1()},t.prototype.redoA1=function(){this.m_icp.redoA1()},t.prototype.recA1=function(){this.m_icp.recA1()},t}();__reflect(CCaliPresenterAdapter.prototype,"CCaliPresenterAdapter",["ICaliPresenter"]);var CEyeangle2ResNameFinder=function(){function t(){}return t.prototype.setInp=function(t){this.m_inpStr=t},t.prototype.getResult=function(){var t,e;return this.m_inpStr.indexOf(".gif")>=0||this.m_inpStr.indexOf("_gif")>=0?(e=parseInt(this.m_inpStr.substr(4,3)),t=10>e?"img_00"+e.toString():100>e?"img_0"+e.toString():"img_"+e.toString(),t+="_gif"):this.m_inpStr.indexOf(".png")>=0||this.m_inpStr.indexOf("_png")>=0?(e=parseInt(this.m_inpStr.substr(4,3)),t=10>e?"img_00"+e.toString():100>e?"img_0"+e.toString():"img_"+e.toString(),t+="_png"):this.m_inpStr.indexOf("img")>=0?(e=parseInt(this.m_inpStr.substr(4,3)),t=10>e?"img_00"+e.toString():100>e?"img_0"+e.toString():"img_"+e.toString(),t+="_png"):(e=this.m_inpStr.indexOf(".json")>=0?parseInt(this.m_inpStr.substr(3,3)):parseInt(this.m_inpStr),t=10>e?"pic00"+e.toString():100>e?"pic0"+e.toString():"pic"+e.toString(),t+="_json"),t},t}();__reflect(CEyeangle2ResNameFinder.prototype,"CEyeangle2ResNameFinder",["IEyeangle2ResNameFinder","IFinder"]);var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_cc=!1,e.visible=!1,e.x=0,e.y=0,e}return __extends(e,t),e.prototype.setParent=function(t){this.m_parent=t},e.prototype.getParent=function(){return this.m_parent},e.prototype.setCloseListener=function(t){this.m_closeListener=t},e.prototype.setContent=function(t){this.cc_content=t,this.m_cc&&(this.content.text=this.cc_content)},e.prototype.showDlg=function(){this.getParent().getNotiLayer().addChild(this),this.getParent().getNotiLayer().visible=!0,this.visible=!0,this.getParent().disableForNoti()},e.prototype.setSceneRect=function(t,e,i,n){this.x=t+(i-300)/2,this.y=e+(n-300)/5*2},e.prototype._setParentContainer=function(t){this.m_parentContainer=t},e.prototype._getParentContainer=function(){return window.alert("Don't use _getParentContainer() here. Use getParent() instead."),this.m_parentContainer},e.prototype.childrenCreated=function(){this.m_cc=!0,this.content.text=this.cc_content,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)},e.prototype.onCloseBtn=function(t){this.visible=!1,this.getParent().getNotiLayer().visible=!1,this.getParent().applyFunc(this.m_closeListener,null),this.getParent().resumeAfterNoti()},e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(){this.visible=!1},e.prototype.isVisible=function(){return this.visible},e}(eui.Panel);t.CAlertPanel=e,__reflect(e.prototype,"eyeangle2.CAlertPanel",["IAlertDlg","INotification","IContainerPlugin","IHidable"])}(eyeangle2||(eyeangle2={}));var CAlertPanelEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.EVT_CLOSE="EVT_CLOSE",e}(egret.Event);__reflect(CAlertPanelEvent.prototype,"CAlertPanelEvent");var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_cc=!1,e.x=0,e.y=0,e.m_evtClose=new CBalloonTipEvent(CBalloonTipEvent.EVT_CLOSE),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.m_cc=!0,this.content.text=this.cc_content,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this);var t=egret.Tween.get(this.arrow,{loop:!0});t.to({y:355},200).wait(300).to({y:345},200).wait(100)},e.prototype.onCloseBtn=function(t){this.close(),this.dispatchEvent(this.m_evtClose)},e.prototype.setContent=function(t){this.cc_content=t,this.m_cc&&(this.content.text=this.cc_content)},e}(eui.Panel);t.CBalloonTip=e,__reflect(e.prototype,"eyeangle2.CBalloonTip")}(eyeangle2||(eyeangle2={}));var CBalloonTipEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.EVT_CLOSE="EVT_CLOSE",e}(egret.Event);__reflect(CBalloonTipEvent.prototype,"CBalloonTipEvent");var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_cc=!1,e.m_ret=!1,e.x=0,e.y=0,e}return __extends(e,t),e.prototype.setParent=function(t){this.m_parent=t},e.prototype.getParent=function(){return this.m_parent},e.prototype.setCloseListener=function(t){this.m_closeListener=t},e.prototype._setContent=function(t){this.m_content=t,this.m_cc&&(this.content.text=this.m_content)},e.prototype.showDlg=function(){this.title="确认";this.getParent().getNotiLayer().addChild(this),this.getParent().getNotiLayer().visible=!0,this.show(),this.getParent().disableForNoti(),this.addEventListener(CConfirmPanelEvent.EVT_CLOSE,this.m_closeListener,this.getParent())},e.prototype._getParentContainer=function(){return window.alert("Don't use _getParentContainer() here. Use getParent() instead."),this.m_parentContainer},e.prototype._setParentContainer=function(t){this.m_parentContainer=t},e.prototype.getResult=function(){return!1},e.prototype.setSceneRect=function(t,e,i,n){this.x=t+(i-400)/2,this.y=e+(n-280)/5*2},e.prototype.childrenCreated=function(){this.m_cc=!0,this.content.text=this.m_content,this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesBtn,this),this.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoBtn,this),this.m_bg=new egret.Shape,this.m_bg.graphics.beginFill(11184895),this.m_bg.graphics.drawRect(0,0,this.width,this.height),this.m_bg.graphics.endFill(),this.bgGrp.addChild(this.m_bg)},e.prototype.onYesBtn=function(t){this.m_ret=!0,this.getParent().getNotiLayer().visible=!1,this.close();var e=new Array;e[0]=this.m_ret,this.getParent().applyFunc(this.m_closeListener,e),this.getParent().resumeAfterNoti()},e.prototype.onNoBtn=function(t){this.m_ret=!1,this.getParent().getNotiLayer().visible=!1,this.close();var e=new Array;e[0]=this.m_ret,this.getParent().applyFunc(this.m_closeListener,e),this.getParent().resumeAfterNoti()},e.prototype.getRet=function(){return this.m_ret},e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(){this.visible=!1},e.prototype.isVisible=function(){return this.visible},e}(eui.Panel);t.CConfirmPanel=e,__reflect(e.prototype,"eyeangle2.CConfirmPanel",["IConfirmDlg","INotification","IContainerPlugin","IHidable"])}(eyeangle2||(eyeangle2={}));var CConfirmPanelEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.EVT_CLOSE="EVT_CLOSE",e}(egret.Event);__reflect(CConfirmPanelEvent.prototype,"CConfirmPanelEvent");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?n(r):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var CPageJumper=function(){function t(){this.m_pages={},this.m_curState=0}return t.prototype.setPage=function(t,e){this.m_pages[t]=e},t.prototype.getPage=function(t){return this.m_pages[t]},t.prototype.isPageReady=function(t){return!1},t.prototype.gotoPage=function(t,e){this.m_targetPage=t;var i;i=this.m_pages[t],i.showOnFront();for(var n in this.m_pages)n!=t&&void 0!=this.m_pages[n]&&this.m_pages[n].hide()},t.prototype.getState=function(){return this.m_curState},t}();__reflect(CPageJumper.prototype,"CPageJumper",["IPageJumper"]);var CPage2EuiAdapter=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){t.prototype.show.call(this),this.m_adaptee.visible=!0},e.prototype.hide=function(){t.prototype.hide.call(this),this.m_adaptee.visible=!1},e}(CPage);__reflect(CPage2EuiAdapter.prototype,"CPage2EuiAdapter");var CPage2EyeanglePraContainerAdapter=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){t.prototype.show.call(this),this.m_adaptee.show()},e.prototype.hide=function(){t.prototype.hide.call(this),this.m_adaptee.hide()},e}(CPage);__reflect(CPage2EyeanglePraContainerAdapter.prototype,"CPage2EyeanglePraContainerAdapter");var CPraMachine_Eyeangle2=function(){function t(){this.m2_lastLenScore=0,this.m_angleArr=[],this.m_imgPathList=[],this.m_angleChecker=new CAngleChecker,this.m_curAngleTag=-1,this.m_curScore=0,this.m_angleInputted=!1,this.m_finished=!1}return t.prototype.setAngleArr=function(t){this.m_angleArr=t,this.refreshImgPathList(),this.m_curAngleTag=-1},t.prototype.getAngleChecker=function(){return this.m_angleChecker},t.prototype.refreshImgPathList=function(){var t,e;for(t=0;t<this.m_angleArr.length;++t){var i=this.m_angleArr[t].m_imgPath;if(null!=i&&""!=i){for(e=0;e<this.m_imgPathList.length&&this.m_imgPathList[e]!=i;++e);this.m_imgPathList.length==e&&this.m_imgPathList.push(this.m_angleArr[t].m_imgPath)}}},t.prototype.inpAngle=function(t){if(!(this.m_curAngleTag>=this.m_angleArr.length)){var e,i=this.m_angleArr[this.m_curAngleTag].m_angleValue;switch(this.m_angleChecker.setInputAngle(t),this.m_angleChecker.setCorreAngle(i),e=this.m_angleChecker.checkAngle()){case 0:break;case 1:this.m_curScore+=10;break;case 2:this.m_curScore+=20;break;case 3:this.m_curScore+=30}this.m_angleInputted=!0,this.m2_lastLenRank=(this.getCurScore()-this.m2_lastLenScore)/10,this.m2_lastLenScore=this.getCurScore()}},t.prototype.nextAngle=function(){this.m_angleInputted=!1,this.m_curAngleTag<this.m_angleArr.length&&(++this.m_curAngleTag,this.m_curAngleTag>=this.m_angleArr.length&&(this.m_finished=!0))},t.prototype.startPra=function(){this.rePra()},t.prototype.rePra=function(){this.m_curAngleTag=0,this.m_curScore=0,this.m_angleInputted=!1,this.m_finished=!1,this.m2_lastLenScore=0},t.prototype.clearPra=function(){this.m_angleArr=[],this.m_imgPathList=[],this.rePra(),this.m_curAngleTag=-1},t.prototype.getCurAngle=function(){return this.m_angleArr.length<=0?null:this.m_angleArr[this.m_curAngleTag]},t.prototype.getCurScore=function(){return this.m_curScore},t.prototype.getCurElemTag=function(){return this.m_curAngleTag},t.prototype.getCmplProgress=function(){return this.m_angleInputted?this.m_curAngleTag+1:this.m_curAngleTag},t.prototype.getCurImgTag=function(){var t;if(this.m_finished)return-1;if(this.m_curAngleTag<0)return-1;for(t=0;t<this.m_imgPathList.length;++t)if(gdeint.tailContain(this.m_imgPathList[t],this.m_angleArr[this.m_curAngleTag].m_imgPath))return t;return-1},t.prototype.getLastLenRank=function(){return this.m2_lastLenRank},t}();__reflect(CPraMachine_Eyeangle2.prototype,"CPraMachine_Eyeangle2",["IEyeanglePraMachine","IPraMachine"]);var CNoUIPreloaderUI=function(){function t(){this.m_noTaskLeft=!1,this.m_curTaskTag=0,this.m_proporFinished=0,this.m_taskList=new Array,this.m_preloader=new CPreloader}return t.prototype.setPreloader=function(t){this.m_preloader=t},t.prototype.setCompleteListener=function(t,e){this.m_cmplListener=t,this.m_cmplThisObj=e},t.prototype.setNextActListener=function(t,e){},t.prototype.addTask=function(t){this.m_taskList.push(t)},t.prototype.setNoTaskLeft=function(t){this.m_noTaskLeft=t},t.prototype._setParentContainer=function(t){this.m_parentContainer=t},t.prototype._getParentContainer=function(){return this.m_parentContainer},t.prototype.showUI=function(){},t.prototype.hideUI=function(){},t.prototype.setSceneRect=function(t,e,i,n){},t.prototype.startPreload=function(){this.preloadCurTask()},t.prototype.preloadCurTask=function(){var t;if(t=this.m_taskList[this.m_curTaskTag]){var e,i=new Array;for(e=0;e<t.m_resList.length;++e)i[e]=t.m_resList[e].m_resName;this.m_preloader.setResList(i),this.m_preloader.setCompleteListener(this.onOneTaskComplete,this),this.m_preloader.preload()}},t.prototype.setProgressListener=function(t,e){this.m_upperProgressListener=t,this.m_upperProgressThisObj=e,this.m_upperProgressListener||window.alert("Null!!"),this.m_preloader.setProgressListener(this.onProgressListener,this)},t.prototype.onProgressListener=function(t,e){var i,n=this.m_taskList[this.m_curTaskTag],r=0;for(i=0;i<=this.m_curTaskTag-1;++i)r+=this.m_taskList[i].m_proportion;this.m_proporFinished=r+n.m_proportion*t/e,this.m_proporFinished>100&&(this.m_proporFinished=100);var s=new Array;s[0]=this.m_proporFinished,s[1]=100,this.m_upperProgressListener.apply(this.m_upperProgressThisObj,s)},t.prototype.onOneTaskComplete=function(){++this.m_curTaskTag,this.m_curTaskTag<=this.m_taskList.length-1?this.preloadCurTask():(this.m_proporFinished>=100||this.m_noTaskLeft)&&this.m_cmplListener.apply(this.m_cmplThisObj)},t.prototype.clearProgress=function(){this.m_taskList=[],this.m_proporFinished=0,this.m_curTaskTag=0},t.prototype.show=function(){this.showUI()},t.prototype.hide=function(){this.hideUI()},t.prototype.isVisible=function(){return!1},t}();__reflect(CNoUIPreloaderUI.prototype,"CNoUIPreloaderUI",["IPreloaderUI","IContainerPlugin","IHidable"]);var CPreloader=function(){function t(){}return t.prototype.setResList=function(t){this.m_resList=t},t.prototype.setCompleteListener=function(t,e){this.m_completeListener=t,this.m_completeThisObj=e},t.prototype.setProgressListener=function(t,e){this.m_progressListener=t,this.m_progressThisObj=e},t.prototype.genGroupName=function(){var t,e=Math.round(1+9998*Math.random()),i="";return i=10>e?"000"+e:100>e?"00"+e:1e3>e?"0"+e:""+e,t="RandomGroup"+(new Date).Format("yyyyMMddhhmmss")+i},t.prototype.preload=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this);var t=this.m_resList,e=this.genGroupName();RES.createGroup(e,t),RES.loadGroup(e)},t.prototype.onResourceLoadProgress=function(t){var e=new Array;e[0]=t.itemsLoaded,e[1]=t.itemsTotal,this.m_progressListener.apply(this.m_progressThisObj,e)},t.prototype.onResourceLoadComplete=function(t){RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),this.m_completeListener.apply(this.m_completeThisObj)},t.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this)},t}();__reflect(CPreloader.prototype,"CPreloader",["IPreloader"]);var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_noUIPreloaderUI=new CNoUIPreloaderUI,e.m_noUIPreloaderUI.setProgressListener(e.onProgressListener,e),e.x=0,e.y=0,e.m_nextActTimer=new egret.Timer(2e3,1),e
}return __extends(e,t),e.prototype.setPreloader=function(t){this.m_noUIPreloaderUI.setPreloader(t)},e.prototype.setCompleteListener=function(t,e){this.m_cmplListener=t,this.m_cmplThisObj=e,this.m_noUIPreloaderUI.setCompleteListener(this.onPreloadComplete,this)},e.prototype.onPreloadComplete=function(){this.m_noUIPreloaderUI.m_proporFinished>=100&&(this.readyLabel.visible=!0,this.m_nextActTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onNextActTimer,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onScrTch,this),this.m_nextActTimer.start()),this.m_cmplListener.apply(this.m_cmplThisObj)},e.prototype.takeNextAct=function(){this.m_nextActListener.apply(this.m_nextActThisObj),this.m_nextActTimer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onNextActTimer,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onScrTch,this)},e.prototype.onNextActTimer=function(t){this.takeNextAct()},e.prototype.onScrTch=function(t){this.takeNextAct()},e.prototype.setNextActListener=function(t,e){this.m_nextActListener=t,this.m_nextActThisObj=e},e.prototype._setParentContainer=function(t){this.m_noUIPreloaderUI._setParentContainer(t)},e.prototype._getParentContainer=function(){return this.m_noUIPreloaderUI._getParentContainer()},e.prototype.addTask=function(t){this.m_noUIPreloaderUI.addTask(t)},e.prototype.setNoTaskLeft=function(t){this.m_noUIPreloaderUI.setNoTaskLeft(t)},e.prototype.setSceneRect=function(t,e,i,n){this.x=t+(i-400)/2,this.y=e+(n-300)/5*2},e.prototype.startPreload=function(){this.m_noUIPreloaderUI.startPreload()},e.prototype.clearProgress=function(){this.m_noUIPreloaderUI.clearProgress(),this.readyLabel.visible=!1,this.cmplPropor.text="0.0%"},e.prototype.onProgressListener=function(){this.cmplPropor.text=this.m_noUIPreloaderUI.m_proporFinished+"%"},e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(){this.visible=!1},e.prototype.isVisible=function(){return this.visible},e}(eui.Component);t.CPreloaderUI=e,__reflect(e.prototype,"eyeangle2.CPreloaderUI",["IPreloaderUI","IContainerPlugin","IHidable"])}(eyeangle2||(eyeangle2={}));var CEyeangle2PraPresenter=function(){function t(){this.s_thumbAreax=25,this.s_thumbAreay=0,this.s_thumbAreaWidth=178,this.s_thumbAreaHeight=160,this.s_thMaxWidth=150,this.s_thMaxHeight=120,this.m_userAngle=0,this.m_pm=new CPraMachine_Eyeangle2,this.m_itm=new ImgThumbModelAdapter,this.m_itm.setThMaxWidth(this.s_thMaxWidth),this.m_itm.setThMaxHeight(this.s_thMaxHeight),this.m_imgSelRect=new gdeint.CRect,this.m_imgSelPtOri=new gdeint.CPoint,this.m_renderFilter=new CNoChangeRenderFilter,this.m_angleVertexPt=new gdeint.CPoint,this.m_angleVertexDispPt=new gdeint.CPoint,this.m_angleEdge1DispPt=new gdeint.CPoint,this.m_angleEdge2DispPt=new gdeint.CPoint}return t.prototype.bindPM=function(t){this.m_pm=t},t.prototype.unbindPM=function(){this.m_pm=null},t.prototype.setITM=function(t){this.m_itm=t},t.prototype.allFieldsFilled=function(){return isNaN(this.m_winWidth)?!1:isNaN(this.m_winHeight)?!1:isNaN(this.m_imgWidth)?!1:isNaN(this.m_imgHeight)?!1:null==this.m_imgSelRect?!1:isNaN(this.m_imgSelRect.m_left)?!1:isNaN(this.m_imgSelRect.m_top)?!1:isNaN(this.m_imgSelRect.m_width)?!1:isNaN(this.m_imgSelRect.m_height)?!1:isNaN(this.m_thAreaWidth)?!1:isNaN(this.m_thAreaHeight)?!1:isNaN(this.m_score)?!1:isNaN(this.m_progress)?!1:null==this.m_angle?!1:null==this.m_angle.m_vertex?!1:isNaN(this.m_angle.m_vertex.m_x)?!1:isNaN(this.m_angle.m_vertex.m_y)?!1:isNaN(this.m_angle.m_edge1Len)?!1:isNaN(this.m_angle.m_edge1Angle)?!1:isNaN(this.m_angle.m_angleValue)?!1:null==this.m_angle.m_imgPath?!1:null==this.m_angle.m2_imgResName?!1:isNaN(this.m_userAngle)?!1:!0},t.prototype.s_setThumbAreaX=function(t){this.s_thumbAreax=t},t.prototype.s_setThumbAreaY=function(t){this.s_thumbAreay=t},t.prototype.s_setThumbAreaWidth=function(t){this.s_thumbAreaWidth=t},t.prototype.s_setThumbAreaHeight=function(t){this.s_thumbAreaHeight=t},t.prototype.s_setThMaxWidth=function(t){this.s_thMaxWidth=t,this.m_itm.setThMaxWidth(this.s_thMaxWidth)},t.prototype.s_setThMaxHeight=function(t){this.s_thMaxHeight=t,this.m_itm.setThMaxHeight(this.s_thMaxHeight)},t.prototype.setRenderFilter=function(t){this.m_renderFilter=t},t.prototype.getRenderFilter=function(){return this.m_renderFilter},t.prototype.refreshAnglePts=function(){this.m_angle&&(this.m_angleVertexPt.m_x=this.m_angle.m_vertex.m_x,this.m_angleVertexPt.m_y=this.m_angle.m_vertex.m_y,this.m_angleVertexDispPt=this.m_renderFilter.ptOConv(this.m_angleVertexPt),this.m_angleEdge1DispPt.m_x=this.m_angleVertexDispPt.m_x+this.m_angle.m_edge1Len*Math.cos(this.m_angle.m_edge1Angle*Math.PI/180),this.m_angleEdge1DispPt.m_y=this.m_angleVertexDispPt.m_y-this.m_angle.m_edge1Len*Math.sin(this.m_angle.m_edge1Angle*Math.PI/180),this.m_angleEdge2DispPt.m_x=this.m_angleVertexDispPt.m_x+this.m_angle.m_edge1Len*Math.cos((this.m_angle.m_edge1Angle+this.m_angle.m_angleValue)*Math.PI/180),this.m_angleEdge2DispPt.m_y=this.m_angleVertexDispPt.m_y-this.m_angle.m_edge1Len*Math.sin((this.m_angle.m_edge1Angle+this.m_angle.m_angleValue)*Math.PI/180))},t.prototype.updateFromPM=function(){this.m_score=this.m_pm.getCurScore(),this.m_angle=this.m_pm.getCurAngle(),this.refreshAnglePts()},t.prototype.clearTempData=function(){},t.prototype.submitToPM=function(){},t.prototype.nextAngle=function(){this.m_pm.nextAngle(),this.getProgress()>=10?this.setState(2):this.setState(0)},t.prototype.fillScore=function(t){this.m_score=t},t.prototype.getScore=function(){return this.m_score},t.prototype.fillProgress=function(t){this.m_progress=t},t.prototype.getProgress=function(){return this.m_progress},t.prototype.getAngle=function(){return this.m_angle},t.prototype.fillCurRank=function(t){this.m_curRank=t},t.prototype.getCurRank=function(){return this.m_curRank},t.prototype.setWinWidth=function(t){this.m_winWidth=t,this.m_imgSelRect.m_width=t,this.m_itm.setImgSelRect(this.m_imgSelRect)},t.prototype.setWinHeight=function(t){this.m_winHeight=t},t.prototype.setImgWidth=function(t){this.m_imgWidth=t,this.m_imgDispWidth=this.m_renderFilter.xOConv(t),this.m_itm.setImgWidth(this.m_imgDispWidth)},t.prototype.getImgWidth=function(){return this.m_imgWidth},t.prototype.setImgHeight=function(t){this.m_imgHeight=t,this.m_itm.setImgHeight(t)},t.prototype.getImgHeight=function(){return this.m_imgHeight},t.prototype.inpImgSelPt=function(t){var e=new gdeint.CRect;e.m_left=t.m_x,e.m_top=t.m_y,e.m_width=this.m_imgSelRect.m_width,e.m_height=this.m_imgSelRect.m_height,this.m_imgSelRect=e,this.m_itm.setImgSelRect(this.m_imgSelRect),this.m_imgSelPtOri.m_x=t.m_x/this.m_renderFilter._getCaRat(),this.m_imgSelPtOri.m_y=t.m_y},t.prototype.inpThSelPt=function(t){var e;e=this.m_itm.tp2Ip(t),this.inpImgSelPt(e)},t.prototype.inpImgSelWidth=function(t){this.m_imgSelRect.m_width=t,this.m_itm.setImgSelRect(this.m_imgSelRect)},t.prototype.inpImgSelHeight=function(t){this.m_imgSelRect.m_height=t,this.m_itm.setImgSelRect(this.m_imgSelRect)},t.prototype.inpUserAngle=function(t){this.m_userAngle=t},t.prototype.submitUserAngle=function(){this.m_pm.inpAngle(this.m_userAngle);var t;t=this.m_pm.getAngleChecker(),t.setCorreAngle(this.m_angle.m_angleValue),t.setInputAngle(this.m_userAngle),this.m_curRank=t.checkAngle(),this.fillProgress(this.m_pm.getCmplProgress())},t.prototype.syncFromRenderFilter=function(){var t=this.m_renderFilter._getCaRat();this.m_imgDispWidth=this.m_renderFilter.xOConv(this.m_imgWidth),this.m_itm.setImgWidth(this.m_imgDispWidth);var e=new gdeint.CPoint;e.m_x=this.m_imgSelPtOri.m_x*t,e.m_y=this.m_imgSelRect.m_top,this.inpImgSelPt(e),this.refreshAnglePts()},t.prototype.setCaRat=function(t){this.m_renderFilter.setCaRat(t),this.syncFromRenderFilter()},t.prototype.showAngle=function(t){this.m_angle=t,this.refreshAnglePts(),this.m_itm.setImgSelRect(this.m_imgSelRect)},t.prototype.setState=function(t){this.m_state=t},t.prototype.rePra=function(){this.m_curRank=0,this.m_pm.rePra()},t.prototype.clearPra=function(){this.m_pm.clearPra(),this.rePra()},t.prototype.getImgRect=function(){var t,e;return t=new gdeint.CRect,t.m_left=-this.m_imgSelRect.m_left/this.m_renderFilter._getCaRat(),t.m_top=-this.m_imgSelRect.m_top,t.m_width=this.m_imgWidth,t.m_height=this.m_imgHeight,e=this.m_renderFilter.rectOConv(t)},t.prototype.getThumbRect=function(){this.m_itm.setImgWidth(this.m_renderFilter.xOConv(this.m_imgWidth));var t;return t=new gdeint.CRect,t.m_width=this.m_itm.getThWidth(),t.m_height=this.m_itm.getThHeight(),t.m_left=this.s_thumbAreax+(this.s_thumbAreaWidth-t.m_width)/2,t.m_top=this.s_thumbAreay+(this.s_thumbAreaHeight-t.m_height)/2,t},t.prototype.rfgetScrThumbSelRect=function(){var t;this.m_itm.setImgWidth(this.m_renderFilter.xOConv(this.m_imgWidth));var e;e=this.getThumbRect();var i=this.m_itm.getThSelRect();return t=new gdeint.CRect,t.m_left=i.m_left,t.m_top=i.m_top,t.m_width=i.m_width,t.m_height=i.m_height,t},t.prototype.rfgetScrAngleVertexPt=function(){var t;return t=this.m_angleVertexDispPt},t.prototype.rfgetScrAngleEdge1Pt=function(){var t;return t=this.m_angleEdge1DispPt},t.prototype.rfgetScrAngleEdge2Pt=function(){var t;return t=this.m_angleEdge2DispPt},t.prototype.rfgetScrThQuestionerPt=function(){var t,e;return e=this.m_itm.ip2Tp(this.m_renderFilter.ptOConv(this.m_angleVertexPt)),t=new gdeint.CPoint,t.m_x=e.m_x-8,t.m_y=e.m_y-12,t},t}();__reflect(CEyeangle2PraPresenter.prototype,"CEyeangle2PraPresenter",["IEyeangle2PraPresenter","IPraPresenter","IBindableWithPM","IPresenterWithThumb","IPresenterWithCa"]);var CEyeangle2RenderFilter=function(){function t(){}return t.prototype.setCaRat=function(t){this.m_caRat=t},t.prototype._getCaRat=function(){return this.m_caRat},t.prototype.xOConv=function(t){var e;return e=t*this.m_caRat},t.prototype.xIConv=function(t){var e;return e=t/this.m_caRat},t.prototype.yOConv=function(t){return t},t.prototype.yIConv=function(t){return t},t.prototype.ptOConv=function(t){var e;return e=new gdeint.CPoint,e.m_x=this.xOConv(t.m_x),e.m_y=t.m_y,e},t.prototype.ptIConv=function(t){var e;return e=new gdeint.CPoint,e.m_x=t.m_x/this.m_caRat,e.m_y=t.m_y,e},t.prototype.rectOConv=function(t){var e;return e=new gdeint.CRect,e.m_left=t.m_left*this.m_caRat,e.m_top=t.m_top,e.m_width=t.m_width*this.m_caRat,e.m_height=t.m_height,e},t.prototype.rectIConv=function(t){var e;return e=new gdeint.CRect,e.m_left=t.m_left/this.m_caRat,e.m_top=t.m_top,e.m_width=t.m_width/this.m_caRat,e.m_height=t.m_height,e},t.prototype.angleOConv=function(t){var e;return e=t,e.m_vertex.m_x*=this.m_caRat,e},t.prototype.angleIConv=function(t){var e;return e=new CAngle,e.m_vertex=new gdeint.CPoint,e.m_vertex.m_x=t.m_vertex.m_x,e.m_vertex.m_y=t.m_vertex.m_y,e.m_edge1Len=t.m_edge1Len,e.m_edge1Angle=t.m_edge1Angle,e.m_angleValue=t.m_angleValue,e.m_imgPath=t.m_imgPath,e.m_vertex.m_x/=3,e},t}();__reflect(CEyeangle2RenderFilter.prototype,"CEyeangle2RenderFilter",["IEyeangle2RenderFilter","IRectRenderFilter","IRenderFilter","IAngleRenderFilter","IRenderFilterWithCa"]);var CNoChangeRenderFilter=function(){function t(){}return t.prototype.setCaRat=function(t){},t.prototype._getCaRat=function(){return 1},t.prototype.xOConv=function(t){var e;return e=t},t.prototype.xIConv=function(t){var e;return e=t},t.prototype.yOConv=function(t){return t},t.prototype.yIConv=function(t){return t},t.prototype.ptOConv=function(t){var e;return e=t},t.prototype.ptIConv=function(t){var e;return e=t},t.prototype.rectOConv=function(t){var e;return e=t},t.prototype.rectIConv=function(t){var e;return e=t},t.prototype.angleOConv=function(t){var e;return e=t},t.prototype.angleIConv=function(t){var e;return e=t},t}();__reflect(CNoChangeRenderFilter.prototype,"CNoChangeRenderFilter",["IEyeangle2RenderFilter","IRectRenderFilter","IRenderFilter","IAngleRenderFilter","IRenderFilterWithCa"]);var S_WEB=1,S_NATIVE_ANDROID=2,S_NATIVE_IOS=3,S_NATIVE_WP=4,S_WECHAT=5,S_BUILD_FOR=S_NATIVE_IOS,S_CHECK_UPDATE_ANDROID=!1,g_welcomeScene,g_welcomePage,g_praScene,g_praContainer,g_pageJumper,g_console,g_winWidth,g_winHeight,g_scale=1,g_scenePos,g_loadingView,g_sceneLayer,g_dlgLayerContainer,g_notiLayerContainer,Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),g_scenePos=new gdeint.CPoint,g_scenePos.m_x=0,g_scenePos.m_y=0,g_console=new egret.TextField,g_console.size=36,g_console.textColor=16711680,g_console.x=80,g_console.y=60,g_sceneLayer=new eui.Group,g_dlgLayerContainer=new egret.DisplayObjectContainer,g_notiLayerContainer=new egret.DisplayObjectContainer,this.addChild(g_sceneLayer),this.addChild(g_dlgLayerContainer),this.addChild(g_notiLayerContainer),this.addChild(g_console),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),this.createScene(),[4,RES.getResAsync("description_json")];case 2:return t=e.sent(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,7,,8]),g_loadingView=new LoadingUI_Eint_V2,this.stage.addChild(g_loadingView),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("logo")];case 3:return n.sent(),g_winWidth=this.stage.stageWidth,g_winHeight=this.stage.stageHeight,t=g_winWidth/480,e=g_winHeight/800,e>t?(g_scale=t,g_scenePos.m_x=0,g_scenePos.m_y=(g_winHeight-800*g_scale)/2):(g_scale=e,g_scenePos.m_x=(g_winWidth-480*g_scale)/2,g_scenePos.m_y=0),g_loadingView.setWinSize(g_winWidth,g_winHeight),g_loadingView.height=g_winHeight,g_loadingView.x=0,g_loadingView.y=0,g_loadingView.create(),this.stage.addChild(g_loadingView),g_loadingView.visible=!0,[4,RES.loadGroup("preload",0,g_loadingView)];case 4:return n.sent(),[4,RES.loadGroup("eint",0,g_loadingView)];case 5:return n.sent(),[4,RES.loadGroup("eyeangle",0,g_loadingView)];case 6:return n.sent(),this.stage.removeChild(g_loadingView),[3,8];case 7:return i=n.sent(),console.error(i),[3,8];case 8:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createScene=function(){g_welcomeScene=new eyeangle2.CWelcomeScene_Eyeangle2_V2,g_welcomeScene.scaleX=g_scale,g_welcomeScene.scaleY=g_scale,g_welcomeScene.x=g_scenePos.m_x,g_welcomeScene.y=g_scenePos.m_y,g_welcomePage=new CWelcomePage_Eyeangle2,g_welcomePage.m_scene=g_welcomeScene,g_sceneLayer.addChild(g_welcomeScene),g_welcomeScene.visible=!1,g_sceneLayer.visible=!0,g_praContainer=new CEyeanglePraContainer,g_praScene=new eyeangle2.CEyeanglePraScene,g_praScene.setWinWidth(480),g_praScene.setWinHeight(800),g_praScene.scaleX=g_scale,g_praScene.scaleY=g_scale,g_praScene.x=g_scenePos.m_x,g_praScene.y=g_scenePos.m_y,g_praScene.visible=!1,g_sceneLayer.addChild(g_praScene),g_dlgLayerContainer.addChild(g_praScene.getDlgLayer()),g_notiLayerContainer.addChild(g_praScene.getNotiLayer());var t=new eyeangle2.CCaliDlg;t=new eyeangle2.CCaliDlg,t.visible=!1,t.x=40,t.y=80,g_praContainer.setPraScene(g_praScene);var e=new eyeangle2.CAlertPanel;e.setSceneRect(g_scenePos.m_x,g_scenePos.m_y,480*g_scale,800*g_scale),g_praContainer.setAlertDlg(e);var i=new eyeangle2.CConfirmPanel;i.setSceneRect(g_scenePos.m_x,g_scenePos.m_y,480*g_scale,800*g_scale),g_praContainer.setConfirmDlg(i),t.setSceneRect(g_scenePos.m_x,g_scenePos.m_y,480*g_scale,800*g_scale),g_praContainer.setCaliDlg(t);var n=new eyeangle2.CPreloaderUI;n.setSceneRect(g_scenePos.m_x,g_scenePos.m_y,480*g_scale,800*g_scale),n.hide(),g_sceneLayer.addChild(n),g_praContainer.setPreloaderUI(n),g_pageJumper=new CPageJumper;var r=new CPage2EyeanglePraContainerAdapter;r.m_adaptee=g_praContainer,g_pageJumper.setPage("WelcomeScene",g_welcomePage),g_pageJumper.setPage("PraScene",r),g_pageJumper.gotoPage("WelcomeScene",null)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e}(eui.UILayer);__reflect(Main.prototype,"Main");var eyeangle2;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(eui.Button);t.CCloseBtn=e,__reflect(e.prototype,"eyeangle2.CCloseBtn")}(eyeangle2||(eyeangle2={}));var CTopSpace=function(t){function e(){var e=t.call(this)||this;return e.m_space=new egret.Shape,e.m_space.x=0,e.m_space.y=0,e.addChild(e.m_space),e}return __extends(e,t),e.prototype.setColor=function(t){this.m_color=t},e.prototype.draw=function(){this.m_space.graphics.clear(),this.m_space.graphics.beginFill(this.m_color),this.m_space.graphics.drawRect(0,0,this.width,this.height),this.m_space.graphics.endFill()},e.prototype.redraw=function(){this.draw()},e}(egret.DisplayObjectContainer);__reflect(CTopSpace.prototype,"CTopSpace");var EintParsers;!function(t){var e=function(){function t(){}return t.parseFloat=function(t){var e;return e=parseFloat(t),(isNaN(e)||.001>e)&&(e=.001),e},t}();t.CaRatParser=e,__reflect(e.prototype,"EintParsers.CaRatParser")}(EintParsers||(EintParsers={}));var EintValidators;!function(t){var e=function(){function t(){}return t.validate=function(t){var e;e=!0;var i=parseFloat(t);return(isNaN(i)||1e-5>i)&&(e=!1),e},t}();t.CaRatValidator=e,__reflect(e.prototype,"EintValidators.CaRatValidator")}(EintValidators||(EintValidators={}));var ImgThumbModelAdapter=function(){function t(){this.m_itm=new ImgThumbModel}return t.prototype.getRat=function(){return this.m_itm.getRat()},t.prototype.setThMaxWidth=function(t){this.m_itm.setThMaxWidth(t)},t.prototype.setThMaxHeight=function(t){this.m_itm.setThMaxHeight(t)},t.prototype.getThWidth=function(){return this.m_itm.getThWidth()},t.prototype.getThHeight=function(){return this.m_itm.getThHeight()},t.prototype.getThSelRect=function(){var t=this.m_itm.getThSelRect();return t},t.prototype.setImgWidth=function(t){this.m_itm.setImgWidth(t)},t.prototype.setImgHeight=function(t){this.m_itm.setImgHeight(t)},t.prototype.getImgSelRect=function(){return this.m_itm.getImgSelRect()},t.prototype.setImgSelRect=function(t){this.m_itm.setImgSelRect(t)},t.prototype.ip2Tp=function(t){return this.m_itm.ip2Tp(t)},t.prototype.tp2Ip=function(t){return this.m_itm.tp2Ip(t)},t}();__reflect(ImgThumbModelAdapter.prototype,"ImgThumbModelAdapter");var CAngleChecker=function(){function t(){}return t.prototype.setCorreAngle=function(t){this.m_correAngle=t},t.prototype.setInputAngle=function(t){this.m_inputAngle=t},t.prototype.checkAngle=function(){var t,e,i=-1;return t=Math.abs(this.m_correAngle-this.m_inputAngle),t>180&&(t=360-t),e=t/this.m_correAngle,i=this.m_correAngle<30?3>t?3:6>t?2:9>t?1:0:this.m_correAngle<90?.1>e?3:.2>e?2:.3>e?1:0:.05>e?3:.1>e?2:.15>e?1:0},t}();__reflect(CAngleChecker.prototype,"CAngleChecker");var CAngleInputterEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.EVT_DI_TOUCHSTART="EVT_DI_TOUCHSTART",e.EVT_DI_TOUCHEND="EVT_DI_TOUCHEND",e}(egret.Event);__reflect(CAngleInputterEvent.prototype,"CAngleInputterEvent");var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.m_flagsContainer=new egret.DisplayObjectContainer,e.m_flagsArr=new Array;var i;for(i=0;3>i;++i)e.m_flagsArr[i]=new egret.Bitmap,e.m_flagsArr[i].width=30,e.m_flagsArr[i].height=40,e.m_flagsArr[i].x=35*i,e.m_flagsArr[i].texture=RES.getRes("score_dot_png"),e.m_flagsContainer.addChild(e.m_flagsArr[i]);return e}return __extends(e,t),e.prototype.childrenCreated=function(){this.scoreFlags.addChild(this.m_flagsContainer)},e.prototype.setRank=function(t){var e;for(e=0;t>e;++e)this.m_flagsArr[e].texture=RES.getRes("score_flag_png");for(;3>e;++e)this.m_flagsArr[e].texture=RES.getRes("score_cross_png");t>0?this.scoreValue.text="+"+t+"0":this.scoreValue.text="+0"},e}(eui.Component);t.CCmpAngleDlg=e,__reflect(e.prototype,"eyeangle2.CCmpAngleDlg")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.s_cpText="\n    Copyright (C) 2019-present, 梁力，MIT许可。\n				注：部分运行库和素材为第三方版权所有，擅自提取使用可能造成侵权！\n				白鹭引擎版权声明在白鹭科技官网上的有关产品可找到。",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.content.textColor=0,this.content.size=18,this.content.text=this.s_cpText,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnTap,this),this.arrowUp.touchEnabled=!0,this.arrowDown.touchEnabled=!0,this.arrowUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpArrowTap,this),this.arrowDown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDownArrowTap,this)},e.prototype.onUpArrowTap=function(t){this.contentScroller.viewport.scrollV-100<0?this.contentScroller.viewport.scrollV=0:this.contentScroller.viewport.scrollV-=100},e.prototype.onDownArrowTap=function(t){this.contentScroller.viewport.scrollV+100>400?this.contentScroller.viewport.scrollV=400:this.contentScroller.viewport.scrollV+=100},e.prototype.onCloseBtnTap=function(t){this.visible=!1,this.contentScroller.viewport.scrollV=0},e}(eui.Component);t.CCopyrightPanel_V2=e,__reflect(e.prototype,"eyeangle2.CCopyrightPanel_V2")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.s_cpText="\n    Copyright (C) 2019-present, 梁力，MIT许可。\n				注：部分运行库和素材为第三方版权所有，擅自提取使用可能造成侵权！\n				白鹭引擎版权声明在白鹭科技官网上的有关产品可找到。",e.m_content=new egret.TextField,e.m_content.x=42,e.m_content.y=141,e.m_content.width=315,e.m_content.height=1500,e.m_content.textColor=0,e.m_content.size=18,e.m_contentMask=new egret.Rectangle,e.m_contentMask.x=0,e.m_contentMask.y=0,e.m_contentMask.width=320,e.m_contentMask.height=420,e.m_content.mask=e.m_contentMask,e}return __extends(e,t),e.prototype.childrenCreated=function(){this.m_content.text=this.s_cpText,this.addChild(this.m_content),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnTap,this),this.arrowUp.touchEnabled=!0,this.arrowDown.touchEnabled=!0,this.arrowUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUpArrowTap,this),this.arrowDown.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDownArrowTap,this)},e.prototype.onUpArrowTap=function(t){this.m_contentMask.y-100<0||(this.m_content.y+=100,this.m_contentMask.y-=100,this.m_content.mask=this.m_contentMask)},e.prototype.onDownArrowTap=function(t){this.m_contentMask.y+100>900||(this.m_content.y-=100,this.m_contentMask.y+=100,this.m_content.mask=this.m_contentMask)},e.prototype.onCloseBtnTap=function(t){this.visible=!1,this.m_content.y=141,this.m_contentMask.y=0,this.m_content.mask=this.m_contentMask},e}(eui.Component);t.CCopyrightPanel=e,__reflect(e.prototype,"eyeangle2.CCopyrightPanel")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m2_cc=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.m2_cc=!0,this.txtArea.$setText(this.m_text),this.resetTextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onResetTextBtn,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this),this.txtArea.addEventListener(eui.UIEvent.CHANGE,this.onResetTextBtn,this)},e.prototype.setText=function(t){this.m_text=t,this.m2_cc&&this.txtArea.$setText(this.m_text)},e.prototype.onResetTextBtn=function(){this.txtArea.$setText(this.m_text)},e.prototype.onCloseBtn=function(){this.txtArea.$setText(this.m_text),this.visible=!1},e}(eui.Component);t.CCpyTextPanel=e,__reflect(e.prototype,"eyeangle2.CCpyTextPanel")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.m_bg=new egret.Shape,e.m_starsArr=new Array,e.m_starsContainer=new egret.DisplayObjectContainer;var i;for(i=0;3>i;++i)e.m_starsArr[i]=new egret.Bitmap,e.m_starsArr[i].texture=RES.getRes("star_empty_png"),e.m_starsArr[i].width=60,e.m_starsArr[i].height=60,e.m_starsArr[i].x=64*i,e.m_starsContainer.addChild(e.m_starsArr[i]);return e.m_replayEvt=new CFinalScoreDlgEvent(CFinalScoreDlgEvent.EVT_REPLAY_BTN_TAP),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.m_bg.graphics.beginFill(65280),this.m_bg.graphics.drawRect(0,0,this.width,this.height),this.m_bg.graphics.endFill(),this.bgGrp.addChild(this.m_bg),this.stars.addChild(this.m_starsContainer),this.replayBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReplay,this)},e.prototype.setScore=function(t){this.score.text=t.toString()},e.prototype.setStars=function(t){var e;for(e=0;t>e;++e)this.m_starsArr[e].texture=RES.getRes("star_full_png");for(;3>e;++e)this.m_starsArr[e].texture=RES.getRes("star_empty_png")},e.prototype.onReplay=function(t){this.dispatchEvent(this.m_replayEvt)},e}(eui.Component);t.CFinalScoreDlg=e,__reflect(e.prototype,"eyeangle2.CFinalScoreDlg")}(eyeangle2||(eyeangle2={}));var CFinalScoreDlgEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.EVT_REPLAY_BTN_TAP="EVT_REPLAY_BTN_TAP",e}(egret.Event);__reflect(CFinalScoreDlgEvent.prototype,"CFinalScoreDlgEvent");var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.s_PriText_Android="\n				一、适宜用户：\n					本产品适合8-60岁身体、精神均健康者使用。\n					少年儿童建议在文化水平良好者指导下使用，以减少使用风险和法律纠纷。\n					老幼病残、孕妇不宜使用。禁止作医疗用途。\n				\n				二、系统权限说明（Android）：\n			    只需要使用修改当前设置权限让内容正确显示（修改分辨率、语言、字体等）。\n			    不需要其它权限，如：完全的互联网访问、存储、读取本机识别码、通讯录访问、读取位置信息等。如有申请，禁止即可。\n			    建议在权限管理中禁用除修改当前设置外的所有权限。\n			    本app不会向用户索取私人信息。\n				\n				(更新于2020-02-25)\n				",e.s_PriText_iOS="\n				一、适宜用户：\n					本产品适合8-60岁身体、精神均健康者使用。\n					少年儿童建议在文化水平良好者指导下使用，以减少使用风险和法律纠纷。\n					老幼病残、孕妇不宜使用。禁止作医疗用途。\n				\n				二、系统权限说明（iOS）：\n			    不需要使用相册、相机、位置信息等权限。如有申请，禁止即可。\n			    建议在权限管理中禁用所有权限。\n			    本app不会向用户索取私人信息。\n				\n				(更新于2020-02-25)\n				",e.s_PriText_Other="\n				适宜用户：\n					本产品适合8-60岁身体、精神均健康者使用。\n					少年儿童建议在文化水平良好者指导下使用，以减少使用风险和法律纠纷。\n					老幼病残、孕妇不宜使用。禁止作医疗用途。\n				\n				(更新于2020-02-25)\n				",e}return __extends(e,t),e.prototype.childrenCreated=function(){S_BUILD_FOR==S_NATIVE_ANDROID?this.contentLabel.text=this.s_PriText_Android:S_BUILD_FOR==S_NATIVE_IOS?this.contentLabel.text=this.s_PriText_iOS:this.contentLabel.text=this.s_PriText_Other,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnTap,this)},e.prototype.onCloseBtnTap=function(t){this.visible=!1},e}(eui.Component);t.CHelpPanel=e,__reflect(e.prototype,"eyeangle2.CHelpPanel")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_squareTag=1,e.m_squareChCntTotal=1,e.m_squareChCntLeft=1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.caliSquare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSquareTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this),this.m_rippleCircle=new egret.Bitmap,this.m_rippleCircle.width=20,this.m_rippleCircle.height=20,this.m_rippleCircle.x=this.caliSquare.x+this.caliSquare.width/2-10,this.m_rippleCircle.y=this.caliSquare.y+this.caliSquare.height/2-10,this.m_rippleCircle.texture=RES.getRes("rippleCircle_png"),this.addChild(this.m_rippleCircle);var e=egret.Tween.get(this.m_rippleCircle,{loop:!0});e.to({x:this.caliSquare.x+5,y:this.caliSquare.y+5,width:150,height:150,alpha:.4},200).to({alpha:0},100).wait(1500)},e.prototype.onSquareTap=function(t){if(--this.m_squareChCntLeft,this.m_squareChCntLeft<=0){this.m_squareTag=this.m_squareTag%3+1;var e;e="square"+this.m_squareTag+"_png",this.caliSquare.source=e,this.m_squareTag<=1&&++this.m_squareChCntTotal,this.m_squareChCntLeft=this.m_squareChCntTotal}},e.prototype.onCloseBtn=function(){this.visible=!1},e}(eui.Component);t.CHorverCheckPanel=e,__reflect(e.prototype,"eyeangle2.CHorverCheckPanel")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.s_PriText="\n宜英app隐私政策（2020-03-01）\n\n  本文的主要目的是和您约定我们收集哪些信息、如何收集和使用这些信息，及我们采取的信息安全措施和承诺等。我们深知用户信息保护的重要性，特此制定本政策。\n\n一、名词解释：\n        本政策中“个人信息”、“个人敏感信息”的定义见GB/T35273-2017。\n\n二、我们收集哪些信息：\n    1、我们会在征得用户同意的前提下，收集用户昵称、联系方式（主要是QQ、email，也包括电话号码）。用于必要的以及用户协议规定的沟通。收集方式是为客户提供客服QQ、邮箱地址、信息反馈页面等，用户联系时便能收集到这些信息。\n    2、我们可能会在征得同意的前提下收集用户的操作轨迹、设备型号、使用的其它app及服务等用于产品的改进。\n    3、我们会借助第三方服务实现一些功能，如：通过百度网盘提供一些大文件的下载。会收集到用户在这些第三方厂商的账号信息。\n\n三、我们如何存储这些信息：\n    1、我们不会把用户的个人信息提供给他人，以下情况除外：\n        （1）用户已违规，按用户协议宜英可公开披露其有关信息。\n        （2）用户的行为损害了宜英的合法权利或扰乱了正常秩序，需要举报或把有关的用户信息交公安机关、司法机构处理。\n        （3）用户使用的某些服务需要使用用户的个人信息，我们会在征得用户同意的前提下向第三方提供必要的用户个人信息。此情况下获取的用户个人信息不作他用。\n        （4）因程序运行需要，我们会把个人信息存储到其它厂商提供的服务器，并使用服务器软件运行、管理辅助软件管理，还会使用加密软件进行加密……因此，不可避免地把您的信息提供给了服务器提供商、各款服务器软件的厂商、加密解密软件厂商……\n            对此，宜英采取的措施是选用有知名度或有资质的软件，并适当了解其有关用户协议及政府和专业媒体披露的相关信息。您理解并同意因知名或有资质厂商的原因造成您个人信息泄露，宜英不承担赔偿责任。\n        （5）GB/T35273-2017等国标规定允许披露用户个人信息的其它情况。\n\n    2、我们如何处理用户个人敏感信息：\n        我们获取用户个人敏感信息会根据必要性原则，说明用途并征得用户同意。我们力求做到拒绝提供敏感信息时不影响无关功能的使用。对于获取到的敏感信息我们会不留存或以更高安全保护标准进行存储。\n\n    3、信息安全措施：\n        宜英将按国家一级（即最基础等级）信息安全保护等级标准存储您的个人信息。您理解并同意，若个人信息泄露事件为此标准所难以防范，宜英不承担赔偿责任。\n        信息泄露事件发生时，我们会及时联系存储厂商和公安机关进行处理。\n\n\n四、儿童隐私政策：\n    1、儿童的界定：\n        我们把未满14周岁的用户界定为儿童。\n\n    2、我们如何获取儿童信息：\n        考虑到儿童不具备完全民事行为能力，我们会在征得监护人同意的前提下获取监护人及儿童的个人信息。若儿童在监护人不知情的情况下使用我们的产品，我们会对其进行限制和监管。\n\n    3、我们如何使用少年儿童的个人信息：\n        为了保障少年儿童的身心健康和人身安全，我们可能会把儿童的个人信息及app内有关数据提供给其监护人以及有监护责任的监管部门，而不征得儿童本人的同意。\n\n		",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.contentLabel.$setText(this.s_PriText),this.cpyTextPanel.setText(this.s_PriText),this.cpyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCpyBtn,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)},e.prototype.onCpyBtn=function(t){this.cpyTextPanel.visible=!0},e.prototype.onCloseBtn=function(t){this.visible=!1},e}(eui.Component);t.CPrivacyPolicyPanel=e,__reflect(e.prototype,"eyeangle2.CPrivacyPolicyPanel")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;e.s_cellWidth=20,e.s_cellHeight=18;var i;for(e.m_progressCellsArr=new Array,e.m_progressCellContainer=new egret.DisplayObjectContainer,e.m_progress=0,i=0;10>i;++i)e.m_progressCellsArr[i]=new egret.Bitmap,e.m_progressCellsArr[i].x=i*e.s_cellWidth,e.m_progressCellsArr[i].y=0,e.m_progressCellsArr[i].width=e.s_cellWidth,e.m_progressCellsArr[i].height=e.s_cellHeight,e.m_progressCellsArr[i].texture=RES.getRes("progress_cell_empty_png"),e.m_progressCellContainer.addChild(e.m_progressCellsArr[i]);return e}return __extends(e,t),e.prototype.childrenCreated=function(){this.progressCells.addChild(this.m_progressCellContainer)},e.prototype.setProgress=function(t){this.m_progress=t;var e;for(e=1;e<=this.m_progress;++e)this.m_progressCellsArr[e-1].texture=RES.getRes("progress_cell_png");for(;10>=e;++e)this.m_progressCellsArr[e-1].texture=RES.getRes("progress_cell_empty_png")},e.prototype.clear=function(){this.setProgress(0)},e}(eui.Component);t.CProgressView=e,__reflect(e.prototype,"eyeangle2.CProgressView")}(eyeangle2||(eyeangle2={}));var CScoreFlagRectAdapter=function(){function t(){this.m_sfr=new ScoreFlagRect}return t.prototype.setCnts=function(t,e){this.m_sfr.setCnts(t,e)},t.prototype.getFlagArr=function(){var t;t=new Array;var e,i,n=this.m_sfr.getFlagArr();for(e=0;3>e;++e)for(t[e]=new Array,i=0;10>i;++i)t[e][i]=n[e][i];return t},t}();__reflect(CScoreFlagRectAdapter.prototype,"CScoreFlagRectAdapter",["IScoreFlagRect"]);var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;
return e.s_flagWidth=13,e.s_flagHeight=22,e.m_score=0,e.m_progress=0,e.m_created=!1,e.m_scoreFlagsArr=new Array,e.m_scoreFlagsContainer=new egret.DisplayObjectContainer,e}return __extends(e,t),e.prototype.childrenCreated=function(){this.m_created=!0,this.m_scoreFlagsArr=new Array,this.m_scoreFlagsContainer=new egret.DisplayObjectContainer;var t,e;for(t=0;3>t;++t)for(this.m_scoreFlagsArr[t]=new Array,e=0;10>e;++e)this.m_scoreFlagsArr[t][e]=new egret.Bitmap,this.m_scoreFlagsArr[t][e].x=(this.s_flagWidth+3)*e+5,this.m_scoreFlagsArr[t][e].y=(this.s_flagHeight+2)*t,this.m_scoreFlagsArr[t][e].width=this.s_flagWidth,this.m_scoreFlagsArr[t][e].height=this.s_flagHeight,this.m_scoreFlagsArr[t][e].texture=RES.getRes("score_dot_png"),this.m_scoreFlagsContainer.addChild(this.m_scoreFlagsArr[t][e]);this.scoreFlags.addChild(this.m_scoreFlagsContainer),this.updateScoreFlags()},e.prototype.updateScoreFlags=function(){if(this.m_created){this.scoreTxt.text=this.m_score.toString();var t=new CScoreFlagRectAdapter,e=this.m_score/10,i=30-3*this.m_progress,n=30-e-i;t.setCnts(e,n);var r,s,o=t.getFlagArr();for(r=0;3>r;++r)for(s=0;10>s;++s)switch(o[r][s]){case 0:this.m_scoreFlagsArr[r][s].texture=RES.getRes("score_dot_png");break;case 1:this.m_scoreFlagsArr[r][s].texture=RES.getRes("score_flag_png");break;case 2:this.m_scoreFlagsArr[r][s].texture=RES.getRes("score_cross_png")}}},e.prototype.setScoreWithPro=function(t,e){this.m_score=t,this.m_progress=e,this.updateScoreFlags()},e.prototype.clearScore=function(){this.setScoreWithPro(0,-1)},e}(eui.Component);t.CScoreView=e,__reflect(e.prototype,"eyeangle2.CScoreView")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.s_startX1=20,e.s_startX2=15,e.m_str="练习即将开始",e.m_startX=e.s_startX1,e.m_startY=5,e.m_frameTag=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){this.m_timer=new egret.Timer(300,-1),this.m_timer.addEventListener(egret.TimerEvent.TIMER,this.onNextCharStr,this),this.m_timer.start()},e.prototype.onNextCharStr=function(){++this.m_frameTag;var t,e="",i="";for(t=0;t<this.m_frameTag;++t)e+=".";switch(i=this.m_str+e,this.textLabel.text=i,this.m_frameTag){case 1:this.m_startX=this.s_startX1;break;case 2:this.m_startX=this.s_startX1;break;case 3:this.m_startX=this.s_startX1;break;case 4:this.m_startX=this.s_startX1;break;case 5:this.m_startX=this.s_startX2;break;case 6:this.m_startX=this.s_startX2}this.textLabel.x=this.m_startX,this.m_frameTag%=6},e}(eui.Component);t.CStartingCharAni=e,__reflect(e.prototype,"eyeangle2.CStartingCharAni")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_thumbTapEvt=new CThumbUIEvent(CThumbUIEvent.EVT_THUMB_TAP),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.thumbCover.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onThumbTap,this)},e.prototype.setThumbWidth=function(t){this.thumb.width=t,this.thumbSel.width=t,this.thumbCover.width=t},e.prototype.getThumbWidth=function(){return this.thumb.width},e.prototype.setThumbHeight=function(t){this.thumb.height=t,this.thumbSel.height=t,this.thumbCover.height=t},e.prototype.getThumbHeight=function(){return this.thumb.height},e.prototype.setImgSrc=function(t){this.thumb.source=t},e.prototype.setSelRect=function(t){this.thumbSel.x=t.m_left,this.thumbSel.y=t.m_top,this.thumbSel.width=t.m_width,this.thumbSel.height=t.m_height},e.prototype.onThumbTap=function(t){this.thumbSel.x=t.localX-this.thumbSel.width/2,this.thumbSel.y=t.localY-this.thumbSel.height/2,this.m_thumbTapEvt.m_tchX=t.localX,this.m_thumbTapEvt.m_tchY=t.localY,this.dispatchEvent(this.m_thumbTapEvt)},e}(eui.Component);t.CThumbUI=e,__reflect(e.prototype,"eyeangle2.CThumbUI")}(eyeangle2||(eyeangle2={}));var CThumbUIEvent=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var r=t.call(this,e,i,n)||this;return r.m_tchX=0,r.m_tchY=0,r}return __extends(e,t),e.EVT_THUMB_TAP="EVT_THUMB_TAP",e}(egret.Event);__reflect(CThumbUIEvent.prototype,"CThumbUIEvent");var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.s_PriText="\n宜英尺眼通、角眼通app用户协议（2020-02-11）\n\n一、序：\n    1.1、不同意本协议者将不允许使用宜英提供的相关服务。对于不同意本协议且以协议所述方式侵犯宜英及合作厂商合法权益者，宜英也保留追究其法律责任的权利。\n\n    1.2、您理解并同意，故意逼迫、唆使、误导他人违规者也列入违规用户。\n\n    1.3、您理解并同意，对于违反本协议，或经合理判断认为违反本协议的用户，宜英有权对其账号进行封停、限制等处理，且有权公开披露其身份信息以及违规的具体情况并进行必要的说明。您理解并同意，披露的截图若难免含有侵权、泄密等不良信息，后果由您自行承担，且宜英有权把您作态度恶劣论处。\n        公开披露的同时我们会通过您提供的联系方式（如有）进行通知，或尝试通过他人转告。对披露结果有异议者可于5个月内与我们沟通解决。\n\n    1.4、您理解并同意，对于可能违反本协议或可能侵犯供应链厂商合法权益、扰乱公公秩序的情况，宜英有权向您展开调查。若调查受阻（包括但不限于沟通受阻、无回应、不以真实情况回答），情节严重者可列入违规用户名单并公开披露。\n\n    1.5、您充分理解并同意，违规行为为第三方逼迫、唆使、误导引起，但不能提供充分证据证明是第三方所为的情况，宜英将把您作违规者论处。\n\n    1.6、本协议内容会有后续变更。宜英会在协议里注明最后更新时间。您理解并同意，对于协议更新造成的纠纷，我们只根据情节和自身能力给与适当的帮助和补偿。不同意新协议内容者建议以邮件或QQ形式向我们报告，以减少因违规处罚造成的损失。\n\n    1.7、争议解决：争议发生时应当先友好协商。协商未能达成共识则可通过监管平台、监管部门、法律途径解决。宜英工作室愿意接受国家相关部门的监管、整改、关闭以及履行法定义务、承担因违法违规带来的责任。\n\n\n二、服务性质与责任的承担：\n    2.1、您理解并同意，用户无需支付费用便允许使用本app，但因使用本app造成的后果由用户自行承担，宜英工作室及供应链厂商（包括但不限于运行库提供商、素材供应商）、劳务提供商均不承担赔偿等责任。\n\n    2.2、品牌标识的有关说明：\n    “宜英”目前为个人工作室品牌。非宜英成员不得把宜英标志、app图标等用于敏感用途，包括但不限于产品标识、用户图标、论坛签名。不得冒充宜英工作室进行产品发布、消息发布、用户召集等活动。\n\n    2.3、您理解并同意，宜英app为公众提供的服务主要为非排他服务。用户不得以己方竞业要求为由阻碍宜英向竞争对手宣传和提供通用服务。须出具带有宜英签章的书面开发协议方可认定为专属定制服务。\n        违反以上规定的用户应当向宜英赔偿正规渠道推广费用的10倍（下文称“服务限制赔偿金”）。造成其它损害，包括但不限于名誉权、人身财产权者，应当根据法律规定向宜英承担额外的法律责任。服务限制赔偿金不包含名誉权、人身财产权等方面的赔偿，也不能减免其它责任。若服务限制行为同时侵犯了竞争对手的合法权益，则应同时向竞争对手和宜英足额承担各自的法律责任。\n\n三、知识产权：\n    3.1、app的使用许可：\n        本程序使用许可为MIT许可。关于MIT协议的详细说明见MIT协议官方网站。\n\n    3.2、著作权归属：\n        根据国际上的规定，本app著作权归核心技术提供方北京白鹭时代信息技术有限公司（简称白鹭科技）所有。而在中国，因发布推广的需要，内容创作方宜英工作室为著作权证书持有者。\n        侵犯著作权通常会同时侵犯白鹭科技和宜英工作室的合法权益。白鹭科技和宜英工作室均保留追究法律责任的权利。\n\n    3.3、第三方素材的有关协议：\n        宜英app会使用一些第三方提供的素材，如图片、音乐。\n        用户擅自使用这些素材作敏感用途，包括但不限于商业视频、用于自己的产品或Logo，均很有可能侵犯第三方的知识产权。\n        您理解并同意，对此侵权责任由用户自行承担。且宜英工作室因协助第三方调查、取证对您造成的损失不予以赔偿。\n\n    3.4、二次开发的有关协议：\n        （1）二次开发者发布时须在遵守MIT协议的基础上把app图标更换成自家图标，以示与原版app的区别。app内容有改动的，也要在遵守MIT协议的基础上去除相关部分的宜英标识，以区别于原版app。\n        （2）二次开发者不得侵犯程序项目中框架引擎、开发库、素材提供者等的知识产权。\n        注：本app代码中（例如：main. ts）包含白鹭科技的版权声明。二次开发者须充分理解并遵守该BSD协议，避免侵权。该版权声明的最终解释权归白鹭科技所有。\n\n",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.contentLabel.$setText(this.s_PriText),this.resetTextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onResetTextBtn,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnTap,this)},e.prototype.onResetTextBtn=function(){this.contentLabel.$setText(this.s_PriText)},e.prototype.onCloseBtnTap=function(t){this.contentLabel.$setText(this.s_PriText),this.visible=!1},e}(eui.Component);t.CUserProPanel=e,__reflect(e.prototype,"eyeangle2.CUserProPanel")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_locked=!1,e.m_inpAvailable=!1,e.m2_moving=!1,e.m_angle=0,e.m2_lastAngle=0,e.m2_angleOnShow=0,e.m_angleCanvas=new egret.Shape,e.m_canvasMask=new egret.Rectangle,e.m_tchEvt=new CAngleInputterEvent(CAngleInputterEvent.EVT_DI_TOUCHSTART),e.m_tchEndEvt=new CAngleInputterEvent(CAngleInputterEvent.EVT_DI_TOUCHEND),e.m_renderFilter=new CNoChangeRenderFilter,e}return __extends(e,t),e.prototype.onTouchBegin=function(t){if(!this.m_locked){this.m2_moving=!0;var e,i;e=t.localX,i=t.localY;var n=new gdeint.CPoint;n.m_x=e,n.m_y=i,this.m2_angleOnShow=getAngleBetweenPoints0(this.m_vertex,n),this.m2_angleOnShow<0&&(this.m2_angleOnShow+=180),this.toucher.visible=!0,this.toucher.x=t.localX-this.toucher.width/2,this.toucher.y=t.localY-this.toucher.height/2,this.drawBaseEdge(),i<this.m_vertex.m_y?(this.m_angleCanvas.graphics.lineStyle(5,0,.9),this.m_angleCanvas.graphics.moveTo(this.m_vertex.m_x,this.m_vertex.m_y),this.m_angleCanvas.graphics.lineTo(t.localX,t.localY),this.toucher.source="AngleInputterToucher_png"):this.toucher.source="AngleInputterToucher_futiled_png",this.dispatchEvent(this.m_tchEvt)}},e.prototype.onTouchMove=function(t){if(!this.m_locked&&this.m2_moving){var e,i;e=t.localX,i=t.localY;var n=new gdeint.CPoint;n.m_x=e,n.m_y=i,this.m2_angleOnShow=getAngleBetweenPoints0(this.m_vertex,n),this.m2_angleOnShow<0&&(this.m2_angleOnShow+=180),this.toucher.x=e-this.toucher.width/2,this.toucher.y=i-this.toucher.height/2,this.drawBaseEdge(),i<this.m_vertex.m_y?(this.m_angleCanvas.graphics.lineStyle(5,0,.9),this.m_angleCanvas.graphics.moveTo(this.m_vertex.m_x,this.m_vertex.m_y),this.m_angleCanvas.graphics.lineTo(e,i),this.toucher.source="AngleInputterToucher_png"):this.toucher.source="AngleInputterToucher_futiled_png"}},e.prototype.onToucherTouchMove=function(t){if(!this.m_locked&&this.m2_moving){var e,i;e=t.localX+this.toucher.x,i=t.localY+this.toucher.y,this.toucher.x=e-this.toucher.width/2,this.toucher.y=i-this.toucher.height/2,this.drawBaseEdge(),i<this.m_vertex.m_y?(this.m_angleCanvas.graphics.lineStyle(5,0,.9),this.m_angleCanvas.graphics.moveTo(this.m_vertex.m_x,this.m_vertex.m_y),this.m_angleCanvas.graphics.lineTo(e,i),this.toucher.source="AngleInputterToucher_png"):this.toucher.source="AngleInputterToucher_futiled_png"}},e.prototype.onTouchEnd=function(t){if(!this.m_locked){this.m2_moving=!1;var e=t.localX,i=t.localY;if(t.target==this.toucher&&(e+=this.toucher.x,i+=this.toucher.y),t.target==this||t.target==this.toucher){if(this.toucher.visible=!1,i<this.m_vertex.m_y){var n=new gdeint.CPoint;n.m_x=e,n.m_y=i,this.m2_angleOnShow=getAngleBetweenPoints0(this.m_vertex,n),this.m2_angleOnShow<0&&(this.m2_angleOnShow+=180),this.m_angle=this.m2_angleOnShow,this.m2_lastAngle=this.m_angle,this.m_inpAvailable=!0,this.toucher.source="AngleInputterToucher_png"}else this.setAngle(this.m2_lastAngle),this.toucher.source="AngleInputterToucher_futiled_png";this.dispatchEvent(this.m_tchEndEvt)}}},e.prototype.drawBaseEdge=function(){this.m_angleCanvas.graphics.clear(),this.m_angleCanvas.graphics.lineStyle(5,0,.9),this.m_angleCanvas.graphics.moveTo(this.m_vertex.m_x,this.m_vertex.m_y),this.m_angleCanvas.graphics.lineTo(this.width,this.m_vertex.m_y)},e.prototype.childrenCreated=function(){this.m_canvasMask.x=0,this.m_canvasMask.y=0,this.m_canvasMask.width=this.width,this.m_canvasMask.height=this.height,this.m_angleCanvas.mask=this.m_canvasMask,this.m_vertex=new gdeint.CPoint,this.m_vertex.m_x=this.width/2,this.m_vertex.m_y=this.height/2+40,this.drawBaseEdge(),this.bg.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.bg.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this.angleCanvasGrp.addChild(this.m_angleCanvas),this.angleCanvasGrp.visible=!0,this.angleCanvasGrp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.angleCanvasGrp.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.toucher.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onToucherTouchMove,this)},e.prototype.getAngle=function(){return this.m_angle},e.prototype.setAngle=function(t){this.m2_lastAngle=t,this.m2_angleOnShow=t,this.m_angle=t,this.drawBaseEdge();var e,i=100;e=new gdeint.CPoint,e.m_x=this.m_vertex.m_x+i*Math.cos(t*Math.PI/180),e.m_y=this.m_vertex.m_y-i*Math.sin(t*Math.PI/180),this.m_angleCanvas.graphics.lineStyle(5,0,.9),this.m_angleCanvas.graphics.moveTo(this.m_vertex.m_x,this.m_vertex.m_y),this.m_angleCanvas.graphics.lineTo(e.m_x,e.m_y)},e.prototype.setCorreAngle=function(t){var e,i=100;e=new gdeint.CPoint,e.m_x=this.m_vertex.m_x+i*Math.cos(t*Math.PI/180),e.m_y=this.m_vertex.m_y-i*Math.sin(t*Math.PI/180),this.m_angleCanvas.graphics.lineStyle(5,16711680,.9),this.m_angleCanvas.graphics.moveTo(this.m_vertex.m_x,this.m_vertex.m_y),this.m_angleCanvas.graphics.lineTo(e.m_x,e.m_y)},e.prototype.clearAngle=function(){this.m_inpAvailable=!1,this.setAngle(0)},e.prototype.inpAvailable=function(){return this.m_inpAvailable},e.prototype.lock=function(){this.m_locked=!0},e.prototype.unlock=function(){this.m_locked=!1},e}(eui.Component);t.CAngleInputter=e,__reflect(e.prototype,"eyeangle2.CAngleInputter")}(eyeangle2||(eyeangle2={}));var CEyeangle2_winModel=function(){function t(){this.s_topY=20,this.s_topHeight1=30,this.s_topHeight2=180,this.s_bottomHeight=210,this.m_winWidth=0,this.m_winHeight=0,this.m_topHeight=this.s_topHeight2,this.m_topOpen=!0}return t.prototype.setTopSpaceHeight=function(t){this.s_topY=t},t.prototype.getTopSpaceHeight=function(){return this.s_topY},t.prototype.getTopY=function(){return this.s_topY},t.prototype.setTopHeight1=function(t){this.s_topHeight1=t,this.rearrange()},t.prototype.getTopHeight1=function(){return this.s_topHeight1},t.prototype.setTopHeight2=function(t){this.s_topHeight2=t,this.rearrange()},t.prototype.getTopHeight2=function(){return this.s_topHeight2},t.prototype.setBottomHeight=function(t){this.s_bottomHeight=t},t.prototype.getBottomHeight=function(){return this.s_bottomHeight},t.prototype.rearrange=function(){},t.prototype.s_setTopHeight2=function(t){this.s_topHeight2=t,this.m_topOpen&&(this.m_topHeight=this.s_topHeight2)},t.prototype.s_getTopHeight2=function(){return this.s_topHeight2},t.prototype.setWinWidth=function(t){this.m_winWidth=t},t.prototype.setWinHeight=function(t){this.m_winHeight=t},t.prototype.showTop=function(){this.m_topOpen=!0,this.m_topHeight=this.s_topHeight2},t.prototype.hideTop=function(){this.m_topOpen=!1,this.m_topHeight=this.s_topHeight1},t.prototype.getTopHeight=function(){return this.m_topHeight},t.prototype.getMidY=function(){return this.s_topY+this.m_topHeight},t.prototype.getMidHeight=function(){return this.getBottomY()-this.getMidY()},t.prototype.getBottomY=function(){return this.m_winHeight-this.s_bottomHeight},t.prototype.getWinHeight=function(){return this.m_winHeight},t.prototype.getWinWidth=function(){return this.m_winWidth},t}();__reflect(CEyeangle2_winModel.prototype,"CEyeangle2_winModel",["IEyeangle2WinModel","ITMBWinModel","IWinModel"]);var g2_sndObjs=new Array,g2_curSndTag=0,g2_sndChls=Array(),CAngle=function(t){function e(){var e=t.call(this)||this;return e.m_className="CAngle",e.m_vertex=new gdeint.CPoint,e}return __extends(e,t),e}(gdeint.CPraElemBase);__reflect(CAngle.prototype,"CAngle");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var CEyeanglePraContainer=function(t){function e(){var e=t.call(this)||this;return e.m_visibilityTempScene=!1,e.m_resNameFinder=new CEyeangle2ResNameFinder,e.m_renderFilter=new CEyeangle2RenderFilter,e.m_renderFilter.setCaRat(1),e}return __extends(e,t),e.prototype.setResNameFinder=function(t){this.m_resNameFinder=t},e.prototype.getResNameFinder=function(){return this.m_resNameFinder},e.prototype.setPraScene=function(t){this.m_praScene=t,this.m_praScene._setParentContainer(this)},e.prototype.setCaliDlg=function(t){this.m_caliDlg=t,this.m_caliDlg._setParentContainer(this)},e.prototype.setRenderFilter=function(t){this.m_renderFilter=t},e.prototype._getPraScene=function(){return this.m_praScene},e.prototype._getCaliDlg=function(){return this.m_caliDlg},e.prototype._getRenderFilter=function(){return this.m_renderFilter},e.prototype.getDlgLayer=function(){return this._getPraScene().getDlgLayer()},e.prototype.getNotiLayer=function(){return this._getPraScene().getNotiLayer()},e.prototype.disableForNoti=function(){this._getPraScene().disableForNoti()},e.prototype.resumeAfterNoti=function(){this._getPraScene().resumeAfterNoti()},e.prototype.getAllPlugins2=function(){var t=new Array;return t[0]=this.m_caliDlg,t},e.prototype.saveVisibleStates=function(){t.prototype.saveVisibleStates.call(this),this.m_visibilityTempArr2=new Array;var e,i=this.getAllPlugins2();for(e=0;e<i.length;++e)this.m_visibilityTempArr2[e]=i[e].isVisible();this.m_visibilityTempScene=this.m_praScene.isVisible()},e.prototype.getVisibleStates=function(){var e=t.prototype.getVisibleStates.call(this),i=new Array;i[0]=this.m_visibilityTempScene;var n,r=1;for(n=0;n<e.length;++n)i[r+n]=e[n];for(r=1+e.length,n=0;n<this.m_visibilityTempArr2.length;++n)i[r+n]=this.m_visibilityTempArr2[n];return i},e.prototype.show=function(){t.prototype.show.call(this),this.m_visibilityTempScene?this.m_praScene.show():this.m_praScene.hide();var e,i=this.getAllPlugins2();for(e=0;e<i.length;++e)this.m_visibilityTempArr2&&this.m_visibilityTempArr2[e]?i[e].show():i[e].hide()},e.prototype.hide=function(){this.saveVisibleStates(),t.prototype.hide.call(this),this.m_praScene.hide();var e,i=this.getAllPlugins2();for(e=0;e<i.length;++e)i[e].hide()},e.prototype.startNewPra=function(){this._getPraScene().hide();var t=this._getPreloaderUI();t.show(),t.setCompleteListener(this.onPicXMLLoadComplete,this);var e=new gdeint.CPreloadTask,i=new Array;this.m_seledPicTagArr=gdeint.randomNums_ts(13,4);var n;for(n=0;n<this.m_seledPicTagArr.length;++n)i[n]=new gdeint.ResStruct,i[n].m_resName=tag2PicResName(this.m_seledPicTagArr[n]),i[n].m_givenSize=500;e.m_resList=i,e.m_proportion=30,e.m_taskName="picXMLs",t.addTask(e),t.setNoTaskLeft(!0),t.startPreload()},e.prototype.onPicXMLLoadComplete=function(){var t,e=new Array;for(t=0;t<this.m_seledPicTagArr.length;++t){var i,n=this.m_seledPicTagArr[t];i=10>n?"pic00"+n:100>n?"pic0"+n:"pic"+n,i+="_json";var r,s=RES.getRes(i),o=s.pics.pic.angles.angle.length;for(r=0;o>r;++r){var h=new CAngle;h.m_className="CAngle",h.m_vertex=new gdeint.CPoint,h.m_vertex.m_x=parseFloat(s.pics.pic.angles.angle[r].vertex.x),h.m_vertex.m_y=parseFloat(s.pics.pic.angles.angle[r].vertex.y),h.m_edge1Len=parseFloat(s.pics.pic.angles.angle[r].edge1Len),h.m_edge1Angle=parseFloat(s.pics.pic.angles.angle[r].edge1Angle),h.m_angleValue=parseFloat(s.pics.pic.angles.angle[r].angleValue),h.m_imgPath=s.pics.pic.imgPath;var a,l;l=s.pics.pic.imgPath.toString(),this.m_resNameFinder.setInp(l),a=this.m_resNameFinder.getResult(),h.m2_imgResName=a,e.push(h)}}this._getPraScene().setAngleArr(e);var _=this.m_praScene._getParentContainer()._getPreloaderUI();_.setNoTaskLeft(!1),_.setCompleteListener(this.onPicImgLoadComplete,this);var r,m=new gdeint.CPreloadTask,g=new Array;for(r=0;r<this.m_seledPicTagArr.length;++r){var c="",p="";g[r]=new gdeint.ResStruct;var u=tag2PicResName(this.m_seledPicTagArr[r]),s=RES.getRes(u);c=s.pics.pic.imgPath;var d,y=c.split(".");for(p=y[0],d=1;d<y.length;++d)p+="_",p+=y[d];g[r].m_resName=p,g[r].m_givenSize=500}m.m_resList=g,m.m_proportion=72,m.m_taskName="picImgs",_.addTask(m),_.setNoTaskLeft(!0),_.startPreload()},e.prototype.onPicImgLoadComplete=function(){this.m_preloaderUI.setNextActListener(this.startRunPra,this)},e.prototype.startRunPra=function(){this.m_preloaderUI.clearProgress(),this._getPreloaderUI().hide(),this._getPraScene().startNewPra(),this._getPraScene().show()},e.prototype._quitPra=function(){},e.prototype.setQuitHandler=function(t){},e.prototype.showCaliDlg=function(t){var e=this._getCaliDlg();e._setCloseListener(t),e.show()},e.prototype.applyFunc=function(t,e){null!=t&&t.apply(this._getPraScene(),e)},e.prototype.setCaRat=function(t){this.m_renderFilter.setCaRat(t)},e.prototype.getCaRat=function(){return this.m_renderFilter._getCaRat()},e}(CUIContainer);__reflect(CEyeanglePraContainer.prototype,"CEyeanglePraContainer",["IEyeanglePraContainer"]);var CWelcomePage_Eyeangle2=function(){function t(){this.m_commonPage=new CPage}return t.prototype.show=function(){this.m_commonPage.show(),this.m_scene.visible=!0},t.prototype.hide=function(){this.m_commonPage.hide(),this.m_scene.visible=!1},t.prototype.isVisible=function(){return this.m_scene.visible},t.prototype.showOnFront=function(){this.m_commonPage.showOnFront(),this.show(),this.onShownOnFront()},t.prototype.onShownOnFront=function(){this.m_commonPage.onShownOnFront(),this.m_scene.switch2StartBtn()},t}();__reflect(CWelcomePage_Eyeangle2.prototype,"CWelcomePage_Eyeangle2",["IPage","IHidable"]);var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_cc=!1,e.m2_tmpS2StartBtn=!0,e.m_cc=!1,e.m2_tmpS2StartBtn=!0,e}return __extends(e,t),e.prototype.switch2StartBtn=function(){this.m2_tmpS2StartBtn=!0,this.m_cc&&(this.startBtn.visible=!0)},e.prototype.childrenCreated=function(){this.m2_tmpS2StartBtn&&(this.startBtn.visible=!0),this.userProLabel.text="",this.userProLabel.textFlow=new Array({text:"我已阅读并同意",style:{}},{text:"《用户协议》",style:{href:"event:text event triggered",textColor:4474111}},{text:" ",style:{}}),this.userProLabel.touchEnabled=!0,this.userProLabel.addEventListener(egret.TextEvent.LINK,function(t){this.userProPanel.visible=!0},this),this.priPoliLabel.text="",this.priPoliLabel.textFlow=new Array({text:"我已阅读并同意",style:{}},{text:"《隐私政策》",style:{href:"event:text event triggered",textColor:4474111}},{text:" ",style:{}}),this.priPoliLabel.touchEnabled=!0,this.priPoliLabel.addEventListener(egret.TextEvent.LINK,function(t){this.priPoliPanel.visible=!0},this),this.horverLabel.textFlow=new Array({text:"我已认真进行",style:{}},{text:"横竖检验",style:{href:"event:text event triggered",textColor:4474111}},{text:"并仔细阅读相\n关说明",style:{}}),this.horverLabel.touchEnabled=!0,this.horverLabel.addEventListener(egret.TextEvent.LINK,function(t){this.horverCheckPanel.visible=!0},this),this.showCRBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowCR,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartPra,this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelp,this),this.userProRead.addEventListener(eui.UIEvent.CHANGE,this.onReadyCBCheck,this),this.priPoliRead.addEventListener(eui.UIEvent.CHANGE,this.onReadyCBCheck,this),this.horverChecked.addEventListener(eui.UIEvent.CHANGE,this.onReadyCBCheck,this),this.m_cc=!0},e.prototype.onReadyCBCheck=function(){this.userProRead.selected&&this.priPoliRead.selected&&this.horverChecked.selected?this.startBtn.enabled=!0:this.startBtn.enabled=!1},e.prototype.onLatestVerLoaded=function(t){var e=t;this.latestVer.text=e.curVer},e.prototype.onShowCR=function(){this.crPanel.visible=!0},e.prototype.onHelp=function(){this.helpPanel.visible=!0},e.prototype.onStartPra=function(t){this.m2_tmpS2StartBtn=!1,this.startBtn.visible=!1,g_praContainer.startNewPra(),g_praContainer.saveVisibleStates(),g_pageJumper.gotoPage("PraScene",null)},e}(eui.Component);t.CWelcomeScene_Eyeangle2_V2=e,__reflect(e.prototype,"eyeangle2.CWelcomeScene_Eyeangle2_V2")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(e){function i(){var i=e.call(this)||this;i.m2_isFirstPra=!0,i.m_topOpen=!0,i.m_curImgResName="",i.m2_oldImgResName="",i.m_wm=new CEyeangle2_winModel,S_BUILD_FOR!=S_NATIVE_IOS?i.m_wm.setTopSpaceHeight(0):i.m_wm.setTopSpaceHeight(0),i.m_topSpace=new CTopSpace,i.m_UIPresenter=new CEyeangle2PraPresenter,i.m_pm=new CPraMachine_Eyeangle2,i.m_UIPresenter.bindPM(i.m_pm),i.m_tipBalloon1=new t.CBalloonTip,i.m_tipBalloon1.visible=!1,i.m_tipBalloon2=new t.CBalloonTip,i.m_tipBalloon2.visible=!1,i.m_notiLayer=new egret.DisplayObjectContainer,i.m_dlgLayer=new egret.DisplayObjectContainer;var n=new egret.Shape;return n.graphics.beginFill(11184810,.4),n.graphics.drawRect(0,0,g_winWidth,g_winHeight),n.graphics.endFill(),i.m_notiLayer.visible=!1,i.m_notiLayer.addChild(n),i}return __extends(i,e),i.prototype.disableForNoti=function(){this.disableScene()},i.prototype.resumeAfterNoti=function(){this.enableScene()},i.prototype.applyFunc=function(t,e){t.apply(this,e)},i.prototype._setParentContainer=function(t){this.m_parentContaier=t,this.m_UIPresenter.setRenderFilter(t._getRenderFilter())},i.prototype._getParentContainer=function(){return this.m_parentContaier},i.prototype.setAngleArr=function(t){this.m_pm.setAngleArr(t)},i.prototype.disableScene=function(){this.enabled=!1,this.m_notiLayer.visible=!0},i.prototype.enableScene=function(){this.enabled=!0,this.m_notiLayer.visible=!1},i.prototype.show=function(){this.visible=!0},i.prototype.hide=function(){this.visible=!1},i.prototype.isVisible=function(){return this.visible},i.prototype.childrenCreated=function(){this.topSpaceGrp.addChild(this.m_topSpace);var t=new egret.Rectangle(0,0,this.topArea.width,this.topArea.height+5);this.topAreaGroup.mask=t,this.prepareTipBalloons(),this.bottomArea.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackBtnTap,this),this.bottomArea.OKBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKBtnTap,this),this.bottomArea.nextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNextAngleBtnTap,this),this.bottomArea.caliBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCaliBtnTap,this),this.bottomArea.angleInputter.addEventListener(CAngleInputterEvent.EVT_DI_TOUCHSTART,this.onAngleInputerTch,this),this.bottomArea.angleInputter.addEventListener(CAngleInputterEvent.EVT_DI_TOUCHEND,this.onAngleInputerTchEnd,this),this.finalScoreDlg.addEventListener(CFinalScoreDlgEvent.EVT_REPLAY_BTN_TAP,this.onReplay,this)},i.prototype.prepareTipBalloons=function(){this.m_notiLayer.addChild(this.m_tipBalloon1),this.m_notiLayer.addChild(this.m_tipBalloon2)},i.prototype.createScene=function(){this.m_wm.setWinWidth(this.m_winWidth),this.m_wm.setWinHeight(this.m_winHeight),this.m_UIPresenter.setWinWidth(480),this.m_UIPresenter.setWinHeight(this.m_winHeight);var t;t=new gdeint.CPoint,t.m_x=0,t.m_y=0,this.m_UIPresenter.inpImgSelPt(t),this.m_UIPresenter.inpImgSelHeight(this.m_wm.getMidHeight()),this.createTopSpace(),this.createTop(),this.createMiddle(),this.createBottom(),this.midArea.addEventListener(CMidAreaEvent.EVT_IMG_DRAGMOVE,this.onImgDragMove,this),this.midArea.addEventListener(CMidAreaEvent.EVT_IMG_DRAGEND,this.onImgDragEnd,this),this.refreshScene()},i.prototype.refreshScene=function(){this.cmpAngleDlg.visible=!1,this.topArea.scoreView.clearScore(),this.topArea.progressView.clear(),this.bottomArea.angleInputter.clearAngle(),this.bottomArea.angleInputter.unlock(),this.bottomArea.OKBtn.enabled=!1,this.bottomArea.nextBtn.enabled=!1,this.prepareTipBalloons();var t=g_scenePos.m_x+65*g_scale,e=g_scenePos.m_y+190*g_scale;this.m_tipBalloon1.x=t-20,this.m_tipBalloon1.y=e,this.m_tipBalloon1.scaleX=g_scale,this.m_tipBalloon1.scaleY=g_scale,this.m_tipBalloon1.title="提示",this.m_tipBalloon1.setContent("请目测图上显示的角度，并在下方区域输入您目测的结果。"),this.m_tipBalloon1.visible=!0,this.disableScene(),this.m_tipBalloon2.x=t+20,this.m_tipBalloon2.y=e,this.m_tipBalloon2.scaleX=g_scale,this.m_tipBalloon2.scaleY=g_scale,this.m_tipBalloon2.title="提示",this.m_tipBalloon2.setContent("请目测图上显示的\n角度并在下方区域输入您目测的结果。"),this.m_tipBalloon2.visible=!1,this.m_tipBalloon1.addEventListener(CBalloonTipEvent.EVT_CLOSE,this.onTipBalloon1Close,this),this.m_UIPresenter.updateFromPM();var i;i=new gdeint.CPoint,i.m_x=0,i.m_y=0,this.m_UIPresenter.inpImgSelPt(i),this.syncWithUIPresenter(),this.midArea.midContentGroup.x=0,this.midArea.midContentGroup.y=0,this.readjustThumbSel(),g_praScene.enabled=!1},i.prototype.showImg=function(t){if(t!=this.m2_oldImgResName){this.m2_oldImgResName=this.m_curImgResName;var e=new egret.Bitmap;e.texture=RES.getRes(t),this.m_UIPresenter.setImgWidth(e.width),this.m_UIPresenter.setImgHeight(e.height),this.m_curImgResName=t,this.midArea.img.source=RES.getRes(t);var i;i=this.m_UIPresenter.getImgRect(),this.midArea.img.width=i.m_width,this.midArea.img.height=i.m_height;var n=new egret.Rectangle;if(n.x=0,n.y=0,n.width=this.m_winWidth,n.height=this.m_winHeight,this.mask=n,this.m2_oldImgResName!=this.m_curImgResName){var r=new gdeint.CPoint;r.m_x=0,r.m_y=0,this.m_UIPresenter.inpThSelPt(r),this.m_UIPresenter.inpImgSelPt(r)}this.readjustThumb(),this.readjustThumbSel()}},i.prototype.showAngle=function(t){this.showImg(t.m2_imgResName),this.m_UIPresenter.showAngle(t),this.syncWithUIPresenter()},i.prototype.createTopSpace=function(){this.m_topSpace.x=0,this.m_topSpace.y=0,this.m_topSpace.setColor(16777215),this.m_topSpace.width=this.m_wm.getWinWidth(),this.m_topSpace.height=this.m_wm.getTopY(),this.m_topSpace.draw()},i.prototype.createTop=function(){this.topArea.addEventListener(CTopAreaEvent.EVT_SWITCHBTN_TAP,this.onTopBtnTab,this),this.topAreaGroup.y=this.m_wm.getTopY()},i.prototype.createMiddle=function(){this.midAreaGroup.y=this.m_wm.getMidY(),this.midArea.setTrueWidth(this.m_winWidth),this.midArea.setTrueHeight(this.m_wm.getMidHeight())},i.prototype.createBottom=function(){this.bottomAreaGroup.y=this.m_wm.getBottomY()},i.prototype.setWinWidth=function(t){this.m_winWidth=t},i.prototype.setWinHeight=function(t){this.m_winHeight=t},i.prototype.readjustThumb=function(){var t;t=this.m_UIPresenter.getThumbRect(),this.topArea.thumbUI.setThumbWidth(t.m_width),this.topArea.thumbUI.setThumbHeight(t.m_height),this.topArea.thumbUI.x=t.m_left,this.topArea.thumbUI.y=t.m_top,this.topArea.thumbUI.setImgSrc(this.m_curImgResName)},i.prototype.readjustThumbSel=function(){var t;t=this.m_UIPresenter.rfgetScrThumbSelRect(),this.topArea.thumbUI.setSelRect(t)},i.prototype.startNewPra=function(){this.m_pm.rePra(),this.m_UIPresenter.updateFromPM(),this.m2_isFirstPra?(this.m2_isFirstPra=!1,this.createScene()):this.refreshScene()},i.prototype.getNotiLayer=function(){return this.m_notiLayer},i.prototype.getDlgLayer=function(){return this.m_dlgLayer},i.prototype.onTipBalloon1Close=function(t){this.m_tipBalloon2.addEventListener(CBalloonTipEvent.EVT_CLOSE,this.onTipBalloon2Close,this),this.m_tipBalloon2.visible=!0},i.prototype.onTipBalloon2Close=function(t){this.enabled=!0,this.m_notiLayer.visible=!1},i.prototype.onTopBtnTab=function(t){if(playBtnSnd(),this.m_topOpen){this.m_topOpen=!1,this.m_wm.hideTop(),this.m_UIPresenter.inpImgSelHeight(this.m_wm.getMidHeight()),this.midArea.setTrueHeight(this.m_wm.getMidHeight());var e=egret.Tween.get(this.topArea);e.to({y:-(this.m_wm.getTopHeight2()-this.m_wm.getTopHeight1())},300);var i=egret.Tween.get(this.midAreaGroup);i.to({y:this.m_wm.getMidY()},300),i.to({height:this.m_wm.getMidHeight()},300);var n=new egret.Timer(305,1);n.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerTSClosed,this),n.start()}else{this.m_topOpen=!0,this.m_wm.showTop(),this.m_UIPresenter.inpImgSelHeight(this.m_wm.getMidHeight());var e=egret.Tween.get(this.topArea);e.to({y:0},300);var i=egret.Tween.get(this.midAreaGroup);i.to({y:this.m_wm.getMidY()},300),i.to({height:this.m_wm.getMidHeight()},300);var n=new egret.Timer(305,1);n.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerTSOpen,this),n.start()}},i.prototype.timerTSOpen=function(t){this.midArea.setTrueHeight(this.m_wm.getMidHeight()),this.midAreaGroup.x=0,this.midAreaGroup.y=this.m_wm.getMidY(),this.topArea.switchBtn.source=RES.getRes("top_screen_button_up_png"),this.readjustThumbSel()},i.prototype.timerTSClosed=function(t){this.midArea.setTrueHeight(this.m_wm.getMidHeight()),this.midAreaGroup.x=0,this.midAreaGroup.y=this.m_wm.getMidY(),this.topArea.switchBtn.source=RES.getRes("top_screen_button_down_png"),this.readjustThumbSel()},i.prototype.onImgDragMove=function(t){this.readjustThumbSel()},i.prototype.onImgDragEnd=function(t){this.readjustThumbSel()},i.prototype.onReplay=function(t){this.topArea.progressView.setProgress(0),this.topArea.scoreView.setScoreWithPro(0,-1),this.finalScoreDlg.visible=!1,this.bottomArea.angleInputter.clearAngle(),this.bottomArea.angleInputter.unlock(),this.cmpAngleDlg.visible=!1,this._getParentContainer()._getPreloaderUI().clearProgress(),this._getParentContainer().startNewPra()},i.prototype.back2MainMenu=function(){this.finalScoreDlg.visible=!1,g_pageJumper.gotoPage("WelcomeScene",null)},i.prototype.onAngleInputerTch=function(t){this.bottomArea.angleInputter.inpAvailable()?this.bottomArea.OKBtn.enabled=!0:this.bottomArea.OKBtn.enabled=!1},i.prototype.onAngleInputerTchEnd=function(t){this.bottomArea.angleInputter.inpAvailable()?(this.bottomArea.OKBtn.enabled=!0,playBtnSnd()):this.bottomArea.OKBtn.enabled=!1
},i.prototype.onOKBtnTap=function(t){playBtnSnd(),this.m_UIPresenter.inpUserAngle(this.bottomArea.angleInputter.getAngle()),this.m_UIPresenter.submitUserAngle(),this.m_UIPresenter.updateFromPM(),this.bottomArea.angleInputter.setCorreAngle(this.m_UIPresenter.getAngle().m_angleValue),this.bottomArea.angleInputter.lock(),this.bottomArea.OKBtn.enabled=!1,this.cmpAngleDlg.setRank(this.m_UIPresenter.getCurRank()),this.cmpAngleDlg.visible=!0;var e=egret.Tween.get(this.cmpAngleDlg);e.to({y:450},150),this.bottomArea.nextBtn.enabled=!0,this.topArea.progressView.setProgress(this.m_UIPresenter.getProgress()),this.topArea.scoreView.setScoreWithPro(this.m_UIPresenter.getScore(),this.m_UIPresenter.getProgress())},i.prototype.onNextAngleBtnTap=function(t){if(playBtnSnd(),this.m_UIPresenter.getProgress()>=10){this.finalScoreDlg.visible=!0,this.m_UIPresenter.updateFromPM();var e=this.m_UIPresenter.getScore();this.finalScoreDlg.setScore(e),e>=270?this.finalScoreDlg.setStars(3):e>=240?this.finalScoreDlg.setStars(2):e>=180?this.finalScoreDlg.setStars(1):(this.finalScoreDlg.setStars(0),this._getParentContainer().showAlert("成绩很差哟！\n别灰心，继续努力！！",null))}else this.bottomArea.angleInputter.unlock(),this.cmpAngleDlg.visible=!1,this.cmpAngleDlg.y=600,this.bottomArea.angleInputter.clearAngle(),this.bottomArea.nextBtn.enabled=!1,this.m_UIPresenter.nextAngle(),this.m_UIPresenter.updateFromPM(),this.showAngle(this.m_UIPresenter.getAngle())},i.prototype.onBackBtnTap=function(t){this._getParentContainer()._getCaliDlg()._closeDlg(),this._getParentContainer().showConfirm("该操作将放弃当前练习的进度和数据。\n您确定继续吗？",this.onBack2MainMenuConfirm)},i.prototype.onBack2MainMenuConfirm=function(t){var e=t;e&&this.back2MainMenu()},i.prototype.onCaliBtnTap=function(t){this._getParentContainer().showCaliDlg(this.onCaliDlgClose)},i.prototype.onCaliDlgClose=function(t){t&&(this.m_UIPresenter.setCaRat(this._getParentContainer().getCaRat()),this.m_UIPresenter.updateFromPM(),this.syncWithUIPresenter())},i.prototype.syncWithUIPresenter=function(){var t;t=this.m_UIPresenter.getImgRect(),this.midArea.img.width=t.m_width,this.midArea.img.height=t.m_height;var e;e=this.m_UIPresenter.getAngle(),e&&null!=e&&this.showImg(e.m2_imgResName),this.midArea.midContentGroup.x=this.m_UIPresenter.getImgRect().m_left,this.midArea.midContentGroup.y=this.m_UIPresenter.getImgRect().m_top,this.midArea.m_midAngleCanvas.graphics.clear(),this.midArea.m_midAngleCanvas.graphics.lineStyle(5,0,.9);var i,n,r,s;i=this.m_UIPresenter.rfgetScrAngleVertexPt(),n=this.m_UIPresenter.rfgetScrAngleEdge1Pt(),r=this.m_UIPresenter.rfgetScrAngleVertexPt(),s=this.m_UIPresenter.rfgetScrAngleEdge2Pt();var o=new gdeint.CPoint,h=i.m_x;h=h<n.m_x?h:n.m_x,h=h<r.m_x?h:n.m_x,h=h<s.m_x?h:n.m_x,o.m_x=h-10;var a=i.m_y;a=a<n.m_y?a:n.m_y,a=a<r.m_y?a:n.m_y,a=a<s.m_y?a:n.m_y,o.m_y=a-10,this.midArea.m_midAngleCanvas.x=o.m_x,this.midArea.m_midAngleCanvas.y=o.m_y,this.midArea.m_midAngleCanvas.graphics.moveTo(i.m_x-o.m_x,i.m_y-o.m_y),this.midArea.m_midAngleCanvas.graphics.lineTo(n.m_x-o.m_x,n.m_y-o.m_y),this.midArea.m_midAngleCanvas.graphics.moveTo(r.m_x-o.m_x,r.m_y-o.m_y),this.midArea.m_midAngleCanvas.graphics.lineTo(s.m_x-o.m_x,s.m_y-o.m_y),this.readjustThumb();var l;l=this.m_UIPresenter.rfgetScrThQuestionerPt(),this.topArea.thumbUI.thumbQuestioner.x=l.m_x,this.topArea.thumbUI.thumbQuestioner.y=l.m_y,this.readjustThumbSel()},i}(eui.Panel);t.CEyeanglePraScene=e,__reflect(e.prototype,"eyeangle2.CEyeanglePraScene",["IEyeanglePraScene","IScene","IHidable","INotiParent","IContainerPlugin"])}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_bg=new egret.Shape,e}return __extends(e,t),e.prototype.childrenCreated=function(){this.m_bg.graphics.beginFill(4486912),this.m_bg.graphics.drawRect(0,0,this.width,this.height),this.m_bg.graphics.endFill(),this.bgGrp.addChild(this.m_bg)},e}(eui.Component);t.CBottomArea=e,__reflect(e.prototype,"eyeangle2.CBottomArea")}(eyeangle2||(eyeangle2={}));var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.m_trueWidth=0,e.m_trueHeight=0,e.m2_isImgMoving=!1,e.s_horSpace=80,e.s_verSpace=80,e.m_bg=new egret.Shape,e.m_midAngleCanvas=new egret.Shape,e.m2_imgTchStartPoint=new gdeint.CPoint,e.m2_imgStartPoint=new gdeint.CPoint,e.m_evtImgDragEnd=new CMidAreaEvent(CMidAreaEvent.EVT_IMG_DRAGEND),e}return __extends(e,t),e.prototype.childrenCreated=function(){var t=new egret.Rectangle;t.x=0,t.y=0,t.width=480,t.height=2e3,this.mask=t,this.midBgGrp.addChild(this.m_bg),this.midCanvasGrp.addChild(this.m_midAngleCanvas),this.img.touchEnabled=!0,this.img.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.img.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.img.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},e.prototype.redrawBg=function(){this.m_bg.width=this.getTrueWidth(),this.m_bg.height=this.m_trueHeight,this.m_bg.graphics.clear(),this.m_bg.graphics.beginFill(10066329),this.m_bg.graphics.drawRect(0,0,this.m_bg.width,this.m_bg.height),this.m_bg.graphics.endFill()},e.prototype.touchBegin=function(t){this.m2_imgTchStartPoint.m_x=t.stageX,this.m2_imgTchStartPoint.m_y=t.stageY,this.m2_imgStartPoint.m_x=this.midContentGroup.x,this.m2_imgStartPoint.m_y=this.midContentGroup.y,this.m2_isImgMoving=!0},e.prototype.touchMove=function(t){if(this.m2_isImgMoving&&t.target==this.img){var e,i,n,r;e=t.stageX-this.m2_imgTchStartPoint.m_x,i=t.stageY-this.m2_imgTchStartPoint.m_y,n=this.m2_imgStartPoint.m_x+e,r=this.m2_imgStartPoint.m_y+i,n>this.s_horSpace&&(n=this.s_horSpace),n<-(this.img.width+this.s_horSpace-this.getTrueWidth())&&(n=-(this.img.width+this.s_horSpace-this.getTrueWidth())),this.img.height<this.getTrueHeight()?r=(this.getTrueHeight()-this.img.height)/2:(r>this.s_verSpace&&(r=this.s_verSpace),r<-(this.img.height+this.s_verSpace-this.getTrueHeight())&&(r=-(this.img.height+this.s_verSpace-this.getTrueHeight()))),this.midContentGroup.x=n,this.midContentGroup.y=r;var s;s=new gdeint.CPoint,s.m_x=-this.midContentGroup.x,s.m_y=-this.midContentGroup.y,g_praScene.m_UIPresenter.inpImgSelPt(s),this.dispatchEvent(this.m_evtImgDragEnd)}},e.prototype.touchEnd=function(t){this.m2_isImgMoving=!1,this.dispatchEvent(this.m_evtImgDragEnd)},e.prototype.setTrueWidth=function(t){this.m_trueWidth=t,this.redrawBg()},e.prototype.getTrueWidth=function(){return 480},e.prototype.setTrueHeight=function(t){this.m_trueHeight=t,this.redrawBg()},e.prototype.getTrueHeight=function(){return this.m_trueHeight},e}(eui.Component);t.CMidArea=e,__reflect(e.prototype,"eyeangle2.CMidArea")}(eyeangle2||(eyeangle2={}));var CMidAreaEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.EVT_IMG_DRAGMOVE="EVT_IMG_DRAGMOVE",e.EVT_IMG_DRAGEND="EVT_IMG_DRAGEND",e}(egret.Event);__reflect(CMidAreaEvent.prototype,"CMidAreaEvent");var eyeangle2;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.s_bgFrontWidth=428,e.s_bgFrontHeight=160,e.s_topRightWidth=250,e.s_topRightHeight1=65,e.s_thumbAreax=25,e.s_thumbAreay=0,e.s_thumbAreaWidth=178,e.s_thumbAreaHeight=160,e.m_bgBack=new egret.Shape,e.m_bgFront=new egret.Shape,e.m_topButtonBg=new egret.Shape,e.m_evtSwitchBtnTap=new CTopAreaEvent(CTopAreaEvent.EVT_SWITCHBTN_TAP),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.m_bgBack.width=this.width,this.m_bgBack.height=this.height,this.m_bgBack.graphics.beginFill(3403417),this.m_bgBack.graphics.drawRect(0,0,this.m_bgBack.width,this.m_bgBack.height),this.m_bgBack.graphics.endFill(),this.m_bgFront.width=this.s_bgFrontWidth,this.m_bgFront.height=this.s_bgFrontHeight;var t,e,i;t=new eui.Rect,t.fillColor=65280,t.width=this.m_bgFront.width,t.height=this.m_bgFront.height,e=new eui.Rect,e.fillColor=11206638,e.width=this.m_bgFront.width-this.s_topRightWidth,e.height=this.m_bgFront.height,i=new eui.Rect,i.fillColor=15632469,i.x=this.m_bgFront.width-this.s_topRightWidth,i.y=this.s_topRightHeight1,i.width=this.s_topRightWidth,i.height=this.m_bgFront.height-this.s_topRightHeight1,this.m_bgFront.graphics.beginFill(11206638),this.m_bgFront.graphics.drawRect(0,0,this.m_bgFront.width-this.s_topRightWidth,this.m_bgFront.height),this.m_bgFront.graphics.endFill(),this.m_bgFront.graphics.beginFill(15632469),this.m_bgFront.graphics.drawRect(this.m_bgFront.width-this.s_topRightWidth,this.s_topRightHeight1,this.s_topRightWidth,this.m_bgFront.height-this.s_topRightHeight1),this.m_bgFront.graphics.endFill(),this.m_topButtonBg.width=this.switchBtn.width,this.m_topButtonBg.height=this.switchBtn.height,this.m_topButtonBg.graphics.beginFill(16777215),this.m_topButtonBg.graphics.drawRect(0,0,this.m_topButtonBg.width,this.m_topButtonBg.height),this.m_topButtonBg.graphics.endFill(),this.switchBtnBgGrp.x=this.switchBtn.x,this.switchBtnBgGrp.y=this.switchBtn.y,this.bgBackGrp.addChild(this.m_bgBack),this.bgFrontGrp.addChild(t),this.bgFrontGrp.addChild(e),this.bgFrontGrp.addChild(i),this.switchBtnBgGrp.addChild(this.m_topButtonBg),this.switchBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSwitchBtnTap,this),this.thumbUI.addEventListener(CThumbUIEvent.EVT_THUMB_TAP,this.onThumbTap,this)},e.prototype.onSwitchBtnTap=function(t){this.dispatchEvent(this.m_evtSwitchBtnTap)},e.prototype.onThumbTap=function(t){var e;e=new gdeint.CPoint;var i=g_praScene.m_UIPresenter.rfgetScrThumbSelRect();e.m_x=t.m_tchX-i.m_width/2,e.m_y=t.m_tchY-i.m_height/2,g_praScene.m_UIPresenter.inpThSelPt(e),g_praScene.syncWithUIPresenter()},e}(eui.Component);t.CTopArea=e,__reflect(e.prototype,"eyeangle2.CTopArea")}(eyeangle2||(eyeangle2={}));var CTopAreaEvent=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.EVT_SWITCHBTN_TAP="EVT_SWITCHBTN_TAP",e}(egret.Event);__reflect(CTopAreaEvent.prototype,"CTopAreaEvent");var LoadingUI_Eint_V2=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.create=function(){this.width=this.m_winWidth,this.height=this.m_winHeight,this.createView(),this.m_tchTimer=new egret.Timer(1e3,1),this.m_tchTimer.addEventListener(egret.TimerEvent.TIMER,this.onTchTimer,this),this.m_flashCnt=0,this.m_flashTimer=new egret.Timer(300,0),this.m_flashTimer.addEventListener(egret.TimerEvent.TIMER,this.onFlashTimer,this)},e.prototype.createView=function(){this.m_bg=new egret.Shape,this.m_bg.width=this.width,this.m_bg.height=this.height,this.m_bg.graphics.beginFill(16777215),this.m_bg.graphics.drawRect(0,0,this.m_bg.width,this.m_bg.height),this.m_bg.graphics.endFill(),this.m_procra=new egret.TextField,this.m_procra.x=this.width/2-200,this.m_procra.y=.2*this.height,this.m_procra.size=56,this.m_procra.textColor=0,this.m_procra.text="卓越是为了奉献",this.m_logo=new egret.Bitmap,this.m_logo.x=this.width/2-60,this.m_logo.y=.3*this.height,this.m_logo.width=240,this.m_logo.height=128,this.m_logo.texture=RES.getRes("eint_logo_png"),this.m_progress=new egret.TextField,this.m_progress.x=this.width/2-90,this.m_progress.y=.6*this.height,this.m_progress.textColor=0,this.m_progress.textAlign="center",this.m_p2c=new egret.TextField,this.m_p2c.x=this.width/2-80,this.m_p2c.y=.7*this.height,this.m_p2c.textColor=0,this.m_p2c.text="触摸屏幕继续",this.m_p2c.visible=!1,this.addChild(this.m_bg),this.addChild(this.m_procra),this.addChild(this.m_logo),this.addChild(this.m_progress),this.addChild(this.m_p2c)},e.prototype.onTchTimer=function(t){this.m_p2c.visible=!0,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.m_flashTimer.start()},e.prototype.onFlashTimer=function(t){++this.m_flashCnt,0==this.m_flashCnt%3?this.m_p2c.visible=!1:this.m_p2c.visible=!0},e.prototype.onTouch=function(t){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.m_flashTimer.stop(),this.m_p2c.visible=!0,this.visible=!1},e.prototype.setProgress=function(t,e){this.m_progress.text="准备中..."+(t/e*100).toString().substr(0,4)+"%",t==e&&this.m_tchTimer.start()},e.prototype.setWinSize=function(t,e){this.m_winWidth=t,this.m_winHeight=e},e.prototype.onProgress=function(t,e){this.setProgress(t,e)},e}(egret.Sprite);__reflect(LoadingUI_Eint_V2.prototype,"LoadingUI_Eint_V2",["RES.PromiseTaskReporter"]);